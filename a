/* Rule Id: 2098228 */
Bootstrapper.AF = function() {
  var g = {
    data: {},
    _dataConfig: {},
    logHistory: [],
    debug: !0,
    dataObj: function(a) {
      var b = a ? [] : "";
      b.finalized = !1;
      b.type = a;
      return b
    },
    validateInput: function(a) {
      if ("object" !== typeof a || "number" !== typeof a.length) return this.log("Error, input must be type Array");
      /set|push|call|eval|finalize|join/.test(a[0]) || this.log("Error, '" + a[0] + "' is not a valid command");
      return !0
    },
    storeData: function(a, b, d, c, e) {
      e = this.getConfig(b, d, e);
      b = this.data[b][d];
      if (e.finalized) return this.log("Error, cannot modify finalized key '" +
        d + "'"), b;
      if ("undefined" !== typeof b && e.multi) return "join" == a ? b = b.concat(c) : b.push(c), b;
      e.multi ? (d = [c], "join" == a && (d = [].concat(c))) : d = c;
      return d
    },
    getConfig: function(a, b, d, c) {
      a = this._dataConfig[a] || {};
      c = {};
      return "undefined" == typeof a[b] ? (c.multi = d, c.finalized = !1, c) : a[b]
    },
    store: function(a, b, d, c, e) {
      this.data[b] = this.data[b] || {};
      this.data[b][d] = this.storeData(a, b, d, c, e);
      return this.data[b][d]
    },
    parseCode: function(a) {
      return ((a || function() {}) + "").replace(/^function\s*\(\s*\)\s*\{|\}$/g, "")
    },
    callFn: function(a,
      b, d, c) {
      if ("function" == typeof a)
        if (d) "undefined" != typeof window.execScript ? window.execScript(this.parseCode(a)) : eval.call(window, this.parseCode(a));
        else return a.apply(window, c);
      else if ("function" == typeof this.data[a][b])
        if (d) "undefined" != typeof window.execScript ? window.execScript(this.parseCode(this.data[a][b])) : eval.call(window, this.parseCode(this.data[a][b]));
        else return c = "object" == typeof c && "number" == typeof c.length ? c : [], this.data[a][b].apply(this.data[a], c);
      else return this.log("Error, '" + b +
        "' is not a function")
    },
    parse: function(a) {
      if (this.validateInput(a)) {
        a = Array.prototype.slice.call(a, 0);
        var b = a.shift(),
          d = a.shift(),
          c = a.shift(),
          e = a[0];
        if (/set|push|join/.test(b)) return this.store(b, d, c, e, /push|join/.test(b));
        if (/call|eval/.test(b)) return this.callFn(d, c, "eval" == b, a);
        if ("finalize" == b) return a = this._dataConfig[d] = this._dataConfig[d] || {}, a = a[c] || {
          multi: !1
        }, a.finalized = !0, this._dataConfig[d][c] = a
      }
    },
    log: function(a) {
      this.logHistory.push(a);
      return this.debug && "object" == typeof console ? console.log(a) &&
        !1 : !1
    }
  };
  if ("object" == typeof Bootstrapper.AF && "[object Array]" !== Object.prototype.toString.call(Bootstrapper.AF)) return Bootstrapper.AF;
  if ("[object Array]" === Object.prototype.toString.call(Bootstrapper.AF))
    for (var h = Bootstrapper.AF, f = 0; f < h.length; f++) g.parse(h[f]);
  return {
    push: function(a) {
      return g.parse(a)
    }
  }
}();
Bootstrapper._SC = Bootstrapper._SC || {};
Bootstrapper._SC.log = function(a) {
  if (Bootstrapper._SC.logEnabled) try {
    console.log("AA App Log - " + a)
  } catch (f) {}
};
Bootstrapper.AF.push(["set", "SiteCatalyst", "block", function(a) {
  this.ignore = this.ignore || {};
  this.ignore[a] = 1
}]);
Bootstrapper.AF.push(["set", "SiteCatalyst", "exec", function() {
  if (!this.ar) {
    Bootstrapper.AF.push(["push", "SiteCatalyst", "ar", !0]);
    for (var a = this.ns || [], f = {}, c = 0; c < a.length; c++) f[a[c]] = 1, Bootstrapper.AF.push(["set", a[c], "exec", function(a) {
      return function() {
        var c = this.dl || [],
          b = this.DMFDelay || !1;
        Bootstrapper._SC.log("Delay for DMF: " + b);
        var f = function(c) {
            if ("object" != typeof window[a]) setTimeout.call(this, function() {
              f.call(this, c)
            }, 250);
            else {
              for (var g = ["pre", "post"], e = 0; e < g.length; e++) {
                var b = this[g[e]];
                if ("object" == typeof b)
                  for (var k = 0; k < b.length; k++) {
                    var d = b[k],
                      h = window[a];
                    if ("object" == typeof d[0] && d[0].length) {
                      do h = h[d[0].shift()]; while (1 < d[0].length);
                      d[0] = d[0].shift()
                    }
                    if (d[1] && "function" == typeof d[1]) try {
                      h[d[0]] = d[1].call(this, c)
                    } catch (l) {} else h[d[0]] = d[1]
                  }
              }
              window[a].t();
              Bootstrapper.AF.push(["set", a, "getCallbacks", function() {
                return this.callback || []
              }]);
              g = Bootstrapper.AF.push(["call", a, "getCallbacks"]);
              for (e = 0; e < g.length; e++) "function" == typeof g[e] && g[e].call(window)
            }
          },
          l = function() {
            Bootstrapper.data ?
              Bootstrapper.data.resolve.call(this, c, function() {
                for (var a = {}, b = 0; b < c.length; b++) a[c[b]] = arguments[b];
                f.call(this, a)
              }) : f.call(this, {})
          },
          m = this;
        b ? Bootstrapper.bindDOMParsed(function() {
          l.call(m)
        }) : l.call(this)
      }
    }(a[c])]);
    var a = 0,
      b;
    for (b in f) this.ignore && b in this.ignore || (a ? setTimeout(function(a) {
      return function() {
        Bootstrapper.AF.push(["call", a, "exec"])
      }
    }(b), 250 * a) : Bootstrapper.AF.push(["call", b, "exec"]), a++)
  }
}]);
Bootstrapper.bindPageSpecificCompletion(function() {
  setTimeout(function() {
    Bootstrapper.AF.push(["call", "SiteCatalyst", "exec"])
  }, 250)
});
Bootstrapper.AF.push(['eval', function() {
  var sName = 's';
  /*
   Start ActivityMap Module

   The following module enables ActivityMap tracking in Adobe Analytics. ActivityMap
   allows you to view data overlays on your links and content to understand how
   users engage with your web site. If you do not intend to use ActivityMap, you
   can remove the following block of code from your AppMeasurement.js file.
   Additional documentation on how to configure ActivityMap is available at:
   https://marketing.adobe.com/resources/help/en_US/analytics/activitymap/getting-started-admins.html
  */
  function AppMeasurement_Module_ActivityMap(f) {
    function g(a, d) {
      var b, c, n;
      if (a && d && (b = e.c[d] || (e.c[d] = d.split(","))))
        for (n = 0; n < b.length && (c = b[n++]);)
          if (-1 < a.indexOf(c)) return null;
      p = 1;
      return a
    }

    function q(a, d, b, c, e) {
      var g, h;
      if (a.dataset && (h = a.dataset[d])) g = h;
      else if (a.getAttribute)
        if (h = a.getAttribute("data-" + b)) g = h;
        else if (h = a.getAttribute(b)) g = h;
      if (!g && f.useForcedLinkTracking && e && (g = "", d = a.onclick ? "" + a.onclick : "")) {
        b = d.indexOf(c);
        var l, k;
        if (0 <= b) {
          for (b += 10; b < d.length && 0 <= "= \t\r\n".indexOf(d.charAt(b));) b++;
          if (b < d.length) {
            h = b;
            for (l = k = 0; h < d.length && (";" != d.charAt(h) || l);) l ? d.charAt(h) != l || k ? k = "\\" == d.charAt(h) ? !k : 0 : l = 0 : (l = d.charAt(h), '"' != l && "'" != l && (l = 0)), h++;
            if (d = d.substring(b, h)) a.e = new Function("s", "var e;try{s.w." + c + "=" + d + "}catch(e){}"), a.e(f)
          }
        }
      }
      return g || e && f.w[c]
    }

    function r(a, d, b) {
      var c;
      return (c = e[d](a, b)) && (p ? (p = 0, c) : g(k(c), e[d + "Exclusions"]))
    }

    function s(a, d, b) {
      var c;
      if (a && !(1 === (c = a.nodeType) && (c = a.nodeName) && (c = c.toUpperCase()) && t[c]) && (1 === a.nodeType && (c = a.nodeValue) && (d[d.length] = c), b.a ||
          b.t || b.s || !a.getAttribute || ((c = a.getAttribute("alt")) ? b.a = c : (c = a.getAttribute("title")) ? b.t = c : "IMG" == ("" + a.nodeName).toUpperCase() && (c = a.getAttribute("src") || a.src) && (b.s = c)), (c = a.childNodes) && c.length))
        for (a = 0; a < c.length; a++) s(c[a], d, b)
    }

    function k(a) {
      if (null == a || void 0 == a) return a;
      try {
        return a.replace(RegExp("^[\\s\\n\\f\\r\\t\t-\r \u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]+", "mg"), "").replace(RegExp("[\\s\\n\\f\\r\\t\t-\r \u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]+$",
          "mg"), "").replace(RegExp("[\\s\\n\\f\\r\\t\t-\r \u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]{1,}", "mg"), " ").substring(0, 254)
      } catch (d) {}
    }
    var e = this;
    e.s = f;
    var m = window;
    m.s_c_in || (m.s_c_il = [], m.s_c_in = 0);
    e._il = m.s_c_il;
    e._in = m.s_c_in;
    e._il[e._in] = e;
    m.s_c_in++;
    e._c = "s_m";
    e.c = {};
    var p = 0,
      t = {
        SCRIPT: 1,
        STYLE: 1,
        LINK: 1,
        CANVAS: 1
      };
    e._g = function() {
      var a, d, b, c = f.contextData,
        e = f.linkObject;
      (a = f.pageName || f.pageURL) && (d = r(e, "link", f.linkName)) && (b = r(e, "region")) && (c["a.activitymap.page"] = a.substring(0,
        255), c["a.activitymap.link"] = 128 < d.length ? d.substring(0, 128) : d, c["a.activitymap.region"] = 127 < b.length ? b.substring(0, 127) : b, c["a.activitymap.pageIDType"] = f.pageName ? 1 : 0)
    };
    e.link = function(a, d) {
      var b;
      if (d) b = g(k(d), e.linkExclusions);
      else if ((b = a) && !(b = q(a, "sObjectId", "s-object-id", "s_objectID", 1))) {
        var c, f;
        (f = g(k(a.innerText || a.textContent), e.linkExclusions)) || (s(a, c = [], b = {
          a: void 0,
          t: void 0,
          s: void 0
        }), (f = g(k(c.join("")))) || (f = g(k(b.a ? b.a : b.t ? b.t : b.s ? b.s : void 0))) || !(c = (c = a.tagName) && c.toUpperCase ? c.toUpperCase() :
          "") || ("INPUT" == c || "SUBMIT" == c && a.value ? f = g(k(a.value)) : "IMAGE" == c && a.src && (f = g(k(a.src)))));
        b = f
      }
      return b
    };
    e.region = function(a) {
      for (var d, b = e.regionIDAttribute || "id"; a && (a = a.parentNode);) {
        if (d = q(a, b, b, b)) return d;
        if ("BODY" == a.nodeName) return "BODY"
      }
    }
  }
  /* End ActivityMap Module */
  /*
   ============== DO NOT ALTER ANYTHING BELOW THIS LINE ! ===============

  AppMeasurement for JavaScript version: 1.7.0
  Copyright 1996-2016 Adobe, Inc. All Rights Reserved
  More info available at http://www.adobe.com/marketing-cloud.html
  */
  function AppMeasurement() {
    var a = this;
    a.version = "1.7.0";
    var k = window;
    k.s_c_in || (k.s_c_il = [], k.s_c_in = 0);
    a._il = k.s_c_il;
    a._in = k.s_c_in;
    a._il[a._in] = a;
    k.s_c_in++;
    a._c = "s_c";
    var q = k.AppMeasurement.Jb;
    q || (q = null);
    var r = k,
      n, t;
    try {
      for (n = r.parent, t = r.location; n && n.location && t && "" + n.location != "" + t && r.location && "" + n.location != "" + r.location && n.location.host == t.host;) r = n, n = r.parent
    } catch (u) {}
    a.yb = function(a) {
      try {
        console.log(a)
      } catch (b) {}
    };
    a.Ha = function(a) {
      return "" + parseInt(a) == "" + a
    };
    a.replace = function(a, b, d) {
      return !a ||
        0 > a.indexOf(b) ? a : a.split(b).join(d)
    };
    a.escape = function(c) {
      var b, d;
      if (!c) return c;
      c = encodeURIComponent(c);
      for (b = 0; 7 > b; b++) d = "+~!*()'".substring(b, b + 1), 0 <= c.indexOf(d) && (c = a.replace(c, d, "%" + d.charCodeAt(0).toString(16).toUpperCase()));
      return c
    };
    a.unescape = function(c) {
      if (!c) return c;
      c = 0 <= c.indexOf("+") ? a.replace(c, "+", " ") : c;
      try {
        return decodeURIComponent(c)
      } catch (b) {}
      return unescape(c)
    };
    a.pb = function() {
      var c = k.location.hostname,
        b = a.fpCookieDomainPeriods,
        d;
      b || (b = a.cookieDomainPeriods);
      if (c && !a.cookieDomain &&
        !/^[0-9.]+$/.test(c) && (b = b ? parseInt(b) : 2, b = 2 < b ? b : 2, d = c.lastIndexOf("."), 0 <= d)) {
        for (; 0 <= d && 1 < b;) d = c.lastIndexOf(".", d - 1), b--;
        a.cookieDomain = 0 < d ? c.substring(d) : c
      }
      return a.cookieDomain
    };
    a.c_r = a.cookieRead = function(c) {
      c = a.escape(c);
      var b = " " + a.d.cookie,
        d = b.indexOf(" " + c + "="),
        f = 0 > d ? d : b.indexOf(";", d);
      c = 0 > d ? "" : a.unescape(b.substring(d + 2 + c.length, 0 > f ? b.length : f));
      return "[[B]]" != c ? c : ""
    };
    a.c_w = a.cookieWrite = function(c, b, d) {
      var f = a.pb(),
        e = a.cookieLifetime,
        g;
      b = "" + b;
      e = e ? ("" + e).toUpperCase() : "";
      d && "SESSION" !=
        e && "NONE" != e && ((g = "" != b ? parseInt(e ? e : 0) : -60) ? (d = new Date, d.setTime(d.getTime() + 1E3 * g)) : 1 == d && (d = new Date, g = d.getYear(), d.setYear(g + 5 + (1900 > g ? 1900 : 0))));
      return c && "NONE" != e ? (a.d.cookie = a.escape(c) + "=" + a.escape("" != b ? b : "[[B]]") + "; path=/;" + (d && "SESSION" != e ? " expires=" + d.toGMTString() + ";" : "") + (f ? " domain=" + f + ";" : ""), a.cookieRead(c) == b) : 0
    };
    a.K = [];
    a.ha = function(c, b, d) {
      if (a.Aa) return 0;
      a.maxDelay || (a.maxDelay = 250);
      var f = 0,
        e = (new Date).getTime() + a.maxDelay,
        g = a.d.visibilityState,
        m = ["webkitvisibilitychange",
          "visibilitychange"
        ];
      g || (g = a.d.webkitVisibilityState);
      if (g && "prerender" == g) {
        if (!a.ia)
          for (a.ia = 1, d = 0; d < m.length; d++) a.d.addEventListener(m[d], function() {
            var b = a.d.visibilityState;
            b || (b = a.d.webkitVisibilityState);
            "visible" == b && (a.ia = 0, a.delayReady())
          });
        f = 1;
        e = 0
      } else d || a.p("_d") && (f = 1);
      f && (a.K.push({
        m: c,
        a: b,
        t: e
      }), a.ia || setTimeout(a.delayReady, a.maxDelay));
      return f
    };
    a.delayReady = function() {
      var c = (new Date).getTime(),
        b = 0,
        d;
      for (a.p("_d") ? b = 1 : a.va(); 0 < a.K.length;) {
        d = a.K.shift();
        if (b && !d.t && d.t > c) {
          a.K.unshift(d);
          setTimeout(a.delayReady, parseInt(a.maxDelay / 2));
          break
        }
        a.Aa = 1;
        a[d.m].apply(a, d.a);
        a.Aa = 0
      }
    };
    a.setAccount = a.sa = function(c) {
      var b, d;
      if (!a.ha("setAccount", arguments))
        if (a.account = c, a.allAccounts)
          for (b = a.allAccounts.concat(c.split(",")), a.allAccounts = [], b.sort(), d = 0; d < b.length; d++) 0 != d && b[d - 1] == b[d] || a.allAccounts.push(b[d]);
        else a.allAccounts = c.split(",")
    };
    a.foreachVar = function(c, b) {
      var d, f, e, g, m = "";
      e = f = "";
      if (a.lightProfileID) d = a.O, (m = a.lightTrackVars) && (m = "," + m + "," + a.ma.join(",") + ",");
      else {
        d = a.g;
        if (a.pe ||
          a.linkType) m = a.linkTrackVars, f = a.linkTrackEvents, a.pe && (e = a.pe.substring(0, 1).toUpperCase() + a.pe.substring(1), a[e] && (m = a[e].Hb, f = a[e].Gb));
        m && (m = "," + m + "," + a.G.join(",") + ",");
        f && m && (m += ",events,")
      }
      b && (b = "," + b + ",");
      for (f = 0; f < d.length; f++) e = d[f], (g = a[e]) && (!m || 0 <= m.indexOf("," + e + ",")) && (!b || 0 <= b.indexOf("," + e + ",")) && c(e, g)
    };
    a.r = function(c, b, d, f, e) {
      var g = "",
        m, p, k, w, n = 0;
      "contextData" == c && (c = "c");
      if (b) {
        for (m in b)
          if (!(Object.prototype[m] || e && m.substring(0, e.length) != e) && b[m] && (!d || 0 <= d.indexOf("," + (f ? f +
              "." : "") + m + ","))) {
            k = !1;
            if (n)
              for (p = 0; p < n.length; p++) m.substring(0, n[p].length) == n[p] && (k = !0);
            if (!k && ("" == g && (g += "&" + c + "."), p = b[m], e && (m = m.substring(e.length)), 0 < m.length))
              if (k = m.indexOf("."), 0 < k) p = m.substring(0, k), k = (e ? e : "") + p + ".", n || (n = []), n.push(k), g += a.r(p, b, d, f, k);
              else if ("boolean" == typeof p && (p = p ? "true" : "false"), p) {
              if ("retrieveLightData" == f && 0 > e.indexOf(".contextData.")) switch (k = m.substring(0, 4), w = m.substring(4), m) {
                case "transactionID":
                  m = "xact";
                  break;
                case "channel":
                  m = "ch";
                  break;
                case "campaign":
                  m =
                    "v0";
                  break;
                default:
                  a.Ha(w) && ("prop" == k ? m = "c" + w : "eVar" == k ? m = "v" + w : "list" == k ? m = "l" + w : "hier" == k && (m = "h" + w, p = p.substring(0, 255)))
              }
              g += "&" + a.escape(m) + "=" + a.escape(p)
            }
          }
          "" != g && (g += "&." + c)
      }
      return g
    };
    a.usePostbacks = 0;
    a.sb = function() {
      var c = "",
        b, d, f, e, g, m, p, k, n = "",
        r = "",
        s = e = "";
      if (a.lightProfileID) b = a.O, (n = a.lightTrackVars) && (n = "," + n + "," + a.ma.join(",") + ",");
      else {
        b = a.g;
        if (a.pe || a.linkType) n = a.linkTrackVars, r = a.linkTrackEvents, a.pe && (e = a.pe.substring(0, 1).toUpperCase() + a.pe.substring(1), a[e] && (n = a[e].Hb, r = a[e].Gb));
        n && (n = "," + n + "," + a.G.join(",") + ",");
        r && (r = "," + r + ",", n && (n += ",events,"));
        a.events2 && (s += ("" != s ? "," : "") + a.events2)
      }
      if (a.visitor && 1.5 <= parseFloat(a.visitor.version) && a.visitor.getCustomerIDs) {
        e = q;
        if (g = a.visitor.getCustomerIDs())
          for (d in g) Object.prototype[d] || (f = g[d], e || (e = {}), f.id && (e[d + ".id"] = f.id), f.authState && (e[d + ".as"] = f.authState));
        e && (c += a.r("cid", e))
      }
      a.AudienceManagement && a.AudienceManagement.isReady() && (c += a.r("d", a.AudienceManagement.getEventCallConfigParams()));
      for (d = 0; d < b.length; d++) {
        e = b[d];
        g = a[e];
        f = e.substring(0, 4);
        m = e.substring(4);
        !g && "events" == e && s && (g = s, s = "");
        if (g && (!n || 0 <= n.indexOf("," + e + ","))) {
          switch (e) {
            case "supplementalDataID":
              e = "sdid";
              break;
            case "timestamp":
              e = "ts";
              break;
            case "dynamicVariablePrefix":
              e = "D";
              break;
            case "visitorID":
              e = "vid";
              break;
            case "marketingCloudVisitorID":
              e = "mid";
              break;
            case "analyticsVisitorID":
              e = "aid";
              break;
            case "audienceManagerLocationHint":
              e = "aamlh";
              break;
            case "audienceManagerBlob":
              e = "aamb";
              break;
            case "authState":
              e = "as";
              break;
            case "pageURL":
              e = "g";
              255 < g.length &&
                (a.pageURLRest = g.substring(255), g = g.substring(0, 255));
              break;
            case "pageURLRest":
              e = "-g";
              break;
            case "referrer":
              e = "r";
              break;
            case "vmk":
            case "visitorMigrationKey":
              e = "vmt";
              break;
            case "visitorMigrationServer":
              e = "vmf";
              a.ssl && a.visitorMigrationServerSecure && (g = "");
              break;
            case "visitorMigrationServerSecure":
              e = "vmf";
              !a.ssl && a.visitorMigrationServer && (g = "");
              break;
            case "charSet":
              e = "ce";
              break;
            case "visitorNamespace":
              e = "ns";
              break;
            case "cookieDomainPeriods":
              e = "cdp";
              break;
            case "cookieLifetime":
              e = "cl";
              break;
            case "variableProvider":
              e =
                "vvp";
              break;
            case "currencyCode":
              e = "cc";
              break;
            case "channel":
              e = "ch";
              break;
            case "transactionID":
              e = "xact";
              break;
            case "campaign":
              e = "v0";
              break;
            case "latitude":
              e = "lat";
              break;
            case "longitude":
              e = "lon";
              break;
            case "resolution":
              e = "s";
              break;
            case "colorDepth":
              e = "c";
              break;
            case "javascriptVersion":
              e = "j";
              break;
            case "javaEnabled":
              e = "v";
              break;
            case "cookiesEnabled":
              e = "k";
              break;
            case "browserWidth":
              e = "bw";
              break;
            case "browserHeight":
              e = "bh";
              break;
            case "connectionType":
              e = "ct";
              break;
            case "homepage":
              e = "hp";
              break;
            case "events":
              s &&
                (g += ("" != g ? "," : "") + s);
              if (r)
                for (m = g.split(","), g = "", f = 0; f < m.length; f++) p = m[f], k = p.indexOf("="), 0 <= k && (p = p.substring(0, k)), k = p.indexOf(":"), 0 <= k && (p = p.substring(0, k)), 0 <= r.indexOf("," + p + ",") && (g += (g ? "," : "") + m[f]);
              break;
            case "events2":
              g = "";
              break;
            case "contextData":
              c += a.r("c", a[e], n, e);
              g = "";
              break;
            case "lightProfileID":
              e = "mtp";
              break;
            case "lightStoreForSeconds":
              e = "mtss";
              a.lightProfileID || (g = "");
              break;
            case "lightIncrementBy":
              e = "mti";
              a.lightProfileID || (g = "");
              break;
            case "retrieveLightProfiles":
              e = "mtsr";
              break;
            case "deleteLightProfiles":
              e = "mtsd";
              break;
            case "retrieveLightData":
              a.retrieveLightProfiles && (c += a.r("mts", a[e], n, e));
              g = "";
              break;
            default:
              a.Ha(m) && ("prop" == f ? e = "c" + m : "eVar" == f ? e = "v" + m : "list" == f ? e = "l" + m : "hier" == f && (e = "h" + m, g = g.substring(0, 255)))
          }
          g && (c += "&" + e + "=" + ("pev" != e.substring(0, 3) ? a.escape(g) : g))
        }
        "pev3" == e && a.e && (c += a.e)
      }
      return c
    };
    a.D = function(a) {
      var b = a.tagName;
      if ("undefined" != "" + a.Mb || "undefined" != "" + a.Cb && "HTML" != ("" + a.Cb).toUpperCase()) return "";
      b = b && b.toUpperCase ? b.toUpperCase() : "";
      "SHAPE" ==
      b && (b = "");
      b && (("INPUT" == b || "BUTTON" == b) && a.type && a.type.toUpperCase ? b = a.type.toUpperCase() : !b && a.href && (b = "A"));
      return b
    };
    a.Da = function(a) {
      var b = a.href ? a.href : "",
        d, f, e;
      d = b.indexOf(":");
      f = b.indexOf("?");
      e = b.indexOf("/");
      b && (0 > d || 0 <= f && d > f || 0 <= e && d > e) && (f = a.protocol && 1 < a.protocol.length ? a.protocol : l.protocol ? l.protocol : "", d = l.pathname.lastIndexOf("/"), b = (f ? f + "//" : "") + (a.host ? a.host : l.host ? l.host : "") + ("/" != h.substring(0, 1) ? l.pathname.substring(0, 0 > d ? 0 : d) + "/" : "") + b);
      return b
    };
    a.L = function(c) {
      var b = a.D(c),
        d, f, e = "",
        g = 0;
      return b && (d = c.protocol, f = c.onclick, !c.href || "A" != b && "AREA" != b || f && d && !(0 > d.toLowerCase().indexOf("javascript")) ? f ? (e = a.replace(a.replace(a.replace(a.replace("" + f, "\r", ""), "\n", ""), "\t", ""), " ", ""), g = 2) : "INPUT" == b || "SUBMIT" == b ? (c.value ? e = c.value : c.innerText ? e = c.innerText : c.textContent && (e = c.textContent), g = 3) : "IMAGE" == b && c.src && (e = c.src) : e = a.Da(c), e) ? {
        id: e.substring(0, 100),
        type: g
      } : 0
    };
    a.Kb = function(c) {
      for (var b = a.D(c), d = a.L(c); c && !d && "BODY" != b;)
        if (c = c.parentElement ? c.parentElement : c.parentNode) b =
          a.D(c), d = a.L(c);
      d && "BODY" != b || (c = 0);
      c && (b = c.onclick ? "" + c.onclick : "", 0 <= b.indexOf(".tl(") || 0 <= b.indexOf(".trackLink(")) && (c = 0);
      return c
    };
    a.Bb = function() {
      var c, b, d = a.linkObject,
        f = a.linkType,
        e = a.linkURL,
        g, m;
      a.na = 1;
      d || (a.na = 0, d = a.clickObject);
      if (d) {
        c = a.D(d);
        for (b = a.L(d); d && !b && "BODY" != c;)
          if (d = d.parentElement ? d.parentElement : d.parentNode) c = a.D(d), b = a.L(d);
        b && "BODY" != c || (d = 0);
        if (d && !a.linkObject) {
          var p = d.onclick ? "" + d.onclick : "";
          if (0 <= p.indexOf(".tl(") || 0 <= p.indexOf(".trackLink(")) d = 0
        }
      } else a.na = 1;
      !e && d &&
        (e = a.Da(d));
      e && !a.linkLeaveQueryString && (g = e.indexOf("?"), 0 <= g && (e = e.substring(0, g)));
      if (!f && e) {
        var n = 0,
          r = 0,
          q;
        if (a.trackDownloadLinks && a.linkDownloadFileTypes)
          for (p = e.toLowerCase(), g = p.indexOf("?"), m = p.indexOf("#"), 0 <= g ? 0 <= m && m < g && (g = m) : g = m, 0 <= g && (p = p.substring(0, g)), g = a.linkDownloadFileTypes.toLowerCase().split(","), m = 0; m < g.length; m++)(q = g[m]) && p.substring(p.length - (q.length + 1)) == "." + q && (f = "d");
        if (a.trackExternalLinks && !f && (p = e.toLowerCase(), a.Ga(p) && (a.linkInternalFilters || (a.linkInternalFilters =
            k.location.hostname), g = 0, a.linkExternalFilters ? (g = a.linkExternalFilters.toLowerCase().split(","), n = 1) : a.linkInternalFilters && (g = a.linkInternalFilters.toLowerCase().split(",")), g))) {
          for (m = 0; m < g.length; m++) q = g[m], 0 <= p.indexOf(q) && (r = 1);
          r ? n && (f = "e") : n || (f = "e")
        }
      }
      a.linkObject = d;
      a.linkURL = e;
      a.linkType = f;
      if (a.trackClickMap || a.trackInlineStats) a.e = "", d && (f = a.pageName, e = 1, d = d.sourceIndex, f || (f = a.pageURL, e = 0), k.s_objectID && (b.id = k.s_objectID, d = b.type = 1), f && b && b.id && c && (a.e = "&pid=" + a.escape(f.substring(0, 255)) +
        (e ? "&pidt=" + e : "") + "&oid=" + a.escape(b.id.substring(0, 100)) + (b.type ? "&oidt=" + b.type : "") + "&ot=" + c + (d ? "&oi=" + d : "")))
    };
    a.tb = function() {
      var c = a.na,
        b = a.linkType,
        d = a.linkURL,
        f = a.linkName;
      b && (d || f) && (b = b.toLowerCase(), "d" != b && "e" != b && (b = "o"), a.pe = "lnk_" + b, a.pev1 = d ? a.escape(d) : "", a.pev2 = f ? a.escape(f) : "", c = 1);
      a.abort && (c = 0);
      if (a.trackClickMap || a.trackInlineStats || a.ActivityMap) {
        var b = {},
          d = 0,
          e = a.cookieRead("s_sq"),
          g = e ? e.split("&") : 0,
          m, p, k, e = 0;
        if (g)
          for (m = 0; m < g.length; m++) p = g[m].split("="), f = a.unescape(p[0]).split(","),
            p = a.unescape(p[1]), b[p] = f;
        f = a.account.split(",");
        m = {};
        for (k in a.contextData) k && !Object.prototype[k] && "a.activitymap." == k.substring(0, 14) && (m[k] = a.contextData[k], a.contextData[k] = "");
        a.e = a.r("c", m) + (a.e ? a.e : "");
        if (c || a.e) {
          c && !a.e && (e = 1);
          for (p in b)
            if (!Object.prototype[p])
              for (k = 0; k < f.length; k++)
                for (e && (g = b[p].join(","), g == a.account && (a.e += ("&" != p.charAt(0) ? "&" : "") + p, b[p] = [], d = 1)), m = 0; m < b[p].length; m++) g = b[p][m], g == f[k] && (e && (a.e += "&u=" + a.escape(g) + ("&" != p.charAt(0) ? "&" : "") + p + "&u=0"), b[p].splice(m,
                  1), d = 1);
          c || (d = 1);
          if (d) {
            e = "";
            m = 2;
            !c && a.e && (e = a.escape(f.join(",")) + "=" + a.escape(a.e), m = 1);
            for (p in b) !Object.prototype[p] && 0 < m && 0 < b[p].length && (e += (e ? "&" : "") + a.escape(b[p].join(",")) + "=" + a.escape(p), m--);
            a.cookieWrite("s_sq", e)
          }
        }
      }
      return c
    };
    a.ub = function() {
      if (!a.Fb) {
        var c = new Date,
          b = r.location,
          d, f, e = f = d = "",
          g = "",
          m = "",
          k = "1.2",
          n = a.cookieWrite("s_cc", "true", 0) ? "Y" : "N",
          q = "",
          s = "";
        if (c.setUTCDate && (k = "1.3", (0).toPrecision && (k = "1.5", c = [], c.forEach))) {
          k = "1.6";
          f = 0;
          d = {};
          try {
            f = new Iterator(d), f.next && (k = "1.7",
              c.reduce && (k = "1.8", k.trim && (k = "1.8.1", Date.parse && (k = "1.8.2", Object.create && (k = "1.8.5")))))
          } catch (t) {}
        }
        d = screen.width + "x" + screen.height;
        e = navigator.javaEnabled() ? "Y" : "N";
        f = screen.pixelDepth ? screen.pixelDepth : screen.colorDepth;
        g = a.w.innerWidth ? a.w.innerWidth : a.d.documentElement.offsetWidth;
        m = a.w.innerHeight ? a.w.innerHeight : a.d.documentElement.offsetHeight;
        try {
          a.b.addBehavior("#default#homePage"), q = a.b.Lb(b) ? "Y" : "N"
        } catch (u) {}
        try {
          a.b.addBehavior("#default#clientCaps"), s = a.b.connectionType
        } catch (x) {}
        a.resolution =
          d;
        a.colorDepth = f;
        a.javascriptVersion = k;
        a.javaEnabled = e;
        a.cookiesEnabled = n;
        a.browserWidth = g;
        a.browserHeight = m;
        a.connectionType = s;
        a.homepage = q;
        a.Fb = 1
      }
    };
    a.P = {};
    a.loadModule = function(c, b) {
      var d = a.P[c];
      if (!d) {
        d = k["AppMeasurement_Module_" + c] ? new k["AppMeasurement_Module_" + c](a) : {};
        a.P[c] = a[c] = d;
        d.Xa = function() {
          return d.ab
        };
        d.bb = function(b) {
          if (d.ab = b) a[c + "_onLoad"] = b, a.ha(c + "_onLoad", [a, d], 1) || b(a, d)
        };
        try {
          Object.defineProperty ? Object.defineProperty(d, "onLoad", {
            get: d.Xa,
            set: d.bb
          }) : d._olc = 1
        } catch (f) {
          d._olc =
            1
        }
      }
      b && (a[c + "_onLoad"] = b, a.ha(c + "_onLoad", [a, d], 1) || b(a, d))
    };
    a.p = function(c) {
      var b, d;
      for (b in a.P)
        if (!Object.prototype[b] && (d = a.P[b]) && (d._olc && d.onLoad && (d._olc = 0, d.onLoad(a, d)), d[c] && d[c]())) return 1;
      return 0
    };
    a.wb = function() {
      var c = Math.floor(1E13 * Math.random()),
        b = a.visitorSampling,
        d = a.visitorSamplingGroup,
        d = "s_vsn_" + (a.visitorNamespace ? a.visitorNamespace : a.account) + (d ? "_" + d : ""),
        f = a.cookieRead(d);
      if (b) {
        f && (f = parseInt(f));
        if (!f) {
          if (!a.cookieWrite(d, c)) return 0;
          f = c
        }
        if (f % 1E4 > v) return 0
      }
      return 1
    };
    a.Q =
      function(c, b) {
        var d, f, e, g, m, k;
        for (d = 0; 2 > d; d++)
          for (f = 0 < d ? a.wa : a.g, e = 0; e < f.length; e++)
            if (g = f[e], (m = c[g]) || c["!" + g]) {
              if (!b && ("contextData" == g || "retrieveLightData" == g) && a[g])
                for (k in a[g]) m[k] || (m[k] = a[g][k]);
              a[g] = m
            }
      };
    a.Qa = function(c, b) {
      var d, f, e, g;
      for (d = 0; 2 > d; d++)
        for (f = 0 < d ? a.wa : a.g, e = 0; e < f.length; e++) g = f[e], c[g] = a[g], b || c[g] || (c["!" + g] = 1)
    };
    a.ob = function(a) {
      var b, d, f, e, g, k = 0,
        p, n = "",
        q = "";
      if (a && 255 < a.length && (b = "" + a, d = b.indexOf("?"), 0 < d && (p = b.substring(d + 1), b = b.substring(0, d), e = b.toLowerCase(), f = 0, "http://" ==
          e.substring(0, 7) ? f += 7 : "https://" == e.substring(0, 8) && (f += 8), d = e.indexOf("/", f), 0 < d && (e = e.substring(f, d), g = b.substring(d), b = b.substring(0, d), 0 <= e.indexOf("google") ? k = ",q,ie,start,search_key,word,kw,cd," : 0 <= e.indexOf("yahoo.co") && (k = ",p,ei,"), k && p)))) {
        if ((a = p.split("&")) && 1 < a.length) {
          for (f = 0; f < a.length; f++) e = a[f], d = e.indexOf("="), 0 < d && 0 <= k.indexOf("," + e.substring(0, d) + ",") ? n += (n ? "&" : "") + e : q += (q ? "&" : "") + e;
          n && q ? p = n + "&" + q : q = ""
        }
        d = 253 - (p.length - q.length) - b.length;
        a = b + (0 < d ? g.substring(0, d) : "") + "?" + p
      }
      return a
    };
    a.Wa = function(c) {
      var b = a.d.visibilityState,
        d = ["webkitvisibilitychange", "visibilitychange"];
      b || (b = a.d.webkitVisibilityState);
      if (b && "prerender" == b) {
        if (c)
          for (b = 0; b < d.length; b++) a.d.addEventListener(d[b], function() {
            var b = a.d.visibilityState;
            b || (b = a.d.webkitVisibilityState);
            "visible" == b && c()
          });
        return !1
      }
      return !0
    };
    a.da = !1;
    a.I = !1;
    a.eb = function() {
      a.I = !0;
      a.j()
    };
    a.ba = !1;
    a.U = !1;
    a.$a = function(c) {
      a.marketingCloudVisitorID = c;
      a.U = !0;
      a.j()
    };
    a.ea = !1;
    a.V = !1;
    a.fb = function(c) {
      a.visitorOptedOut = c;
      a.V = !0;
      a.j()
    };
    a.Y = !1;
    a.R = !1;
    a.Sa = function(c) {
      a.analyticsVisitorID = c;
      a.R = !0;
      a.j()
    };
    a.aa = !1;
    a.T = !1;
    a.Ua = function(c) {
      a.audienceManagerLocationHint = c;
      a.T = !0;
      a.j()
    };
    a.Z = !1;
    a.S = !1;
    a.Ta = function(c) {
      a.audienceManagerBlob = c;
      a.S = !0;
      a.j()
    };
    a.Va = function(c) {
      a.maxDelay || (a.maxDelay = 250);
      return a.p("_d") ? (c && setTimeout(function() {
        c()
      }, a.maxDelay), !1) : !0
    };
    a.ca = !1;
    a.H = !1;
    a.va = function() {
      a.H = !0;
      a.j()
    };
    a.isReadyToTrack = function() {
      var c = !0,
        b = a.visitor,
        d, f, e;
      a.da || a.I || (a.Wa(a.eb) ? a.I = !0 : a.da = !0);
      if (a.da && !a.I) return !1;
      b && b.isAllowed() &&
        (a.ba || a.marketingCloudVisitorID || !b.getMarketingCloudVisitorID || (a.ba = !0, a.marketingCloudVisitorID = b.getMarketingCloudVisitorID([a, a.$a]), a.marketingCloudVisitorID && (a.U = !0)), a.ea || a.visitorOptedOut || !b.isOptedOut || (a.ea = !0, a.visitorOptedOut = b.isOptedOut([a, a.fb]), a.visitorOptedOut != q && (a.V = !0)), a.Y || a.analyticsVisitorID || !b.getAnalyticsVisitorID || (a.Y = !0, a.analyticsVisitorID = b.getAnalyticsVisitorID([a, a.Sa]), a.analyticsVisitorID && (a.R = !0)), a.aa || a.audienceManagerLocationHint || !b.getAudienceManagerLocationHint ||
          (a.aa = !0, a.audienceManagerLocationHint = b.getAudienceManagerLocationHint([a, a.Ua]), a.audienceManagerLocationHint && (a.T = !0)), a.Z || a.audienceManagerBlob || !b.getAudienceManagerBlob || (a.Z = !0, a.audienceManagerBlob = b.getAudienceManagerBlob([a, a.Ta]), a.audienceManagerBlob && (a.S = !0)), c = a.ba && !a.U && !a.marketingCloudVisitorID, b = a.Y && !a.R && !a.analyticsVisitorID, d = a.aa && !a.T && !a.audienceManagerLocationHint, f = a.Z && !a.S && !a.audienceManagerBlob, e = a.ea && !a.V, c = c || b || d || f || e ? !1 : !0);
      a.ca || a.H || (a.Va(a.va) ? a.H = !0 : a.ca = !0);
      a.ca && !a.H && (c = !1);
      return c
    };
    a.o = q;
    a.u = 0;
    a.callbackWhenReadyToTrack = function(c, b, d) {
      var f;
      f = {};
      f.jb = c;
      f.ib = b;
      f.gb = d;
      a.o == q && (a.o = []);
      a.o.push(f);
      0 == a.u && (a.u = setInterval(a.j, 100))
    };
    a.j = function() {
      var c;
      if (a.isReadyToTrack() && (a.cb(), a.o != q))
        for (; 0 < a.o.length;) c = a.o.shift(), c.ib.apply(c.jb, c.gb)
    };
    a.cb = function() {
      a.u && (clearInterval(a.u), a.u = 0)
    };
    a.Ya = function(c) {
      var b, d, f = q,
        e = q;
      if (!a.isReadyToTrack()) {
        b = [];
        if (c != q)
          for (d in f = {}, c) f[d] = c[d];
        e = {};
        a.Qa(e, !0);
        b.push(f);
        b.push(e);
        a.callbackWhenReadyToTrack(a,
          a.track, b);
        return !0
      }
      return !1
    };
    a.qb = function() {
      var c = a.cookieRead("s_fid"),
        b = "",
        d = "",
        f;
      f = 8;
      var e = 4;
      if (!c || 0 > c.indexOf("-")) {
        for (c = 0; 16 > c; c++) f = Math.floor(Math.random() * f), b += "0123456789ABCDEF".substring(f, f + 1), f = Math.floor(Math.random() * e), d += "0123456789ABCDEF".substring(f, f + 1), f = e = 16;
        c = b + "-" + d
      }
      a.cookieWrite("s_fid", c, 1) || (c = 0);
      return c
    };
    a.t = a.track = function(c, b) {
      var d, f = new Date,
        e = "s" + Math.floor(f.getTime() / 108E5) % 10 + Math.floor(1E13 * Math.random()),
        g = f.getYear(),
        g = "t=" + a.escape(f.getDate() + "/" + f.getMonth() +
          "/" + (1900 > g ? g + 1900 : g) + " " + f.getHours() + ":" + f.getMinutes() + ":" + f.getSeconds() + " " + f.getDay() + " " + f.getTimezoneOffset());
      a.visitor && (a.visitor.getAuthState && (a.authState = a.visitor.getAuthState()), !a.supplementalDataID && a.visitor.getSupplementalDataID && (a.supplementalDataID = a.visitor.getSupplementalDataID("AppMeasurement:" + a._in, a.expectSupplementalData ? !1 : !0)));
      a.p("_s");
      a.Ya(c) || (b && a.Q(b), c && (d = {}, a.Qa(d, 0), a.Q(c)), a.wb() && !a.visitorOptedOut && (a.analyticsVisitorID || a.marketingCloudVisitorID || (a.fid =
        a.qb()), a.Bb(), a.usePlugins && a.doPlugins && a.doPlugins(a), a.account && (a.abort || (a.trackOffline && !a.timestamp && (a.timestamp = Math.floor(f.getTime() / 1E3)), f = k.location, a.pageURL || (a.pageURL = f.href ? f.href : f), a.referrer || a.Ra || (a.referrer = r.document.referrer), a.Ra = 1, a.referrer = a.ob(a.referrer), a.p("_g")), a.tb() && !a.abort && (a.ub(), g += a.sb(), a.Ab(e, g), a.p("_t"), a.referrer = ""))), c && a.Q(d, 1));
      a.abort = a.supplementalDataID = a.timestamp = a.pageURLRest = a.linkObject = a.clickObject = a.linkURL = a.linkName = a.linkType = k.s_objectID =
        a.pe = a.pev1 = a.pev2 = a.pev3 = a.e = a.lightProfileID = 0
    };
    a.tl = a.trackLink = function(c, b, d, f, e) {
      a.linkObject = c;
      a.linkType = b;
      a.linkName = d;
      e && (a.l = c, a.A = e);
      return a.track(f)
    };
    a.trackLight = function(c, b, d, f) {
      a.lightProfileID = c;
      a.lightStoreForSeconds = b;
      a.lightIncrementBy = d;
      return a.track(f)
    };
    a.clearVars = function() {
      var c, b;
      for (c = 0; c < a.g.length; c++)
        if (b = a.g[c], "prop" == b.substring(0, 4) || "eVar" == b.substring(0, 4) || "hier" == b.substring(0, 4) || "list" == b.substring(0, 4) || "channel" == b || "events" == b || "eventList" == b || "products" ==
          b || "productList" == b || "purchaseID" == b || "transactionID" == b || "state" == b || "zip" == b || "campaign" == b) a[b] = void 0
    };
    a.tagContainerMarker = "";
    a.Ab = function(c, b) {
      var d, f = a.trackingServer;
      d = "";
      var e = a.dc,
        g = "sc.",
        k = a.visitorNamespace;
      f ? a.trackingServerSecure && a.ssl && (f = a.trackingServerSecure) : (k || (k = a.account, f = k.indexOf(","), 0 <= f && (k = k.substring(0, f)), k = k.replace(/[^A-Za-z0-9]/g, "")), d || (d = "2o7.net"), e = e ? ("" + e).toLowerCase() : "d1", "2o7.net" == d && ("d1" == e ? e = "112" : "d2" == e && (e = "122"), g = ""), f = k + "." + e + "." + g + d);
      d = a.ssl ?
        "https://" : "http://";
      e = a.AudienceManagement && a.AudienceManagement.isReady() || 0 != a.usePostbacks;
      d += f + "/b/ss/" + a.account + "/" + (a.mobile ? "5." : "") + (e ? "10" : "1") + "/JS-" + a.version + (a.Eb ? "T" : "") + (a.tagContainerMarker ? "-" + a.tagContainerMarker : "") + "/" + c + "?AQB=1&ndh=1&pf=1&" + (e ? "callback=s_c_il[" + a._in + "].doPostbacks&et=1&" : "") + b + "&AQE=1";
      a.mb(d);
      a.ja()
    };
    a.Pa = /{(%?)(.*?)(%?)}/;
    a.Ib = RegExp(a.Pa.source, "g");
    a.nb = function(c) {
      if ("object" == typeof c.dests)
        for (var b = 0; b < c.dests.length; ++b)
          if (o = c.dests[b], "string" ==
            typeof o.c && "aa." == o.id.substr(0, 3))
            for (var d = o.c.match(a.Ib), b = 0; b < d.length; ++b) {
              match = d[b];
              var f = match.match(a.Pa),
                e = "";
              "%" == f[1] && "timezone_offset" == f[2] ? e = (new Date).getTimezoneOffset() : "%" == f[1] && "timestampz" == f[2] && (e = a.rb());
              o.c = o.c.replace(match, a.escape(e))
            }
    };
    a.rb = function() {
      var c = new Date,
        b = new Date(6E4 * Math.abs(c.getTimezoneOffset()));
      return a.k(4, c.getFullYear()) + "-" + a.k(2, c.getMonth() + 1) + "-" + a.k(2, c.getDate()) + "T" + a.k(2, c.getHours()) + ":" + a.k(2, c.getMinutes()) + ":" + a.k(2, c.getSeconds()) +
        (0 < c.getTimezoneOffset() ? "-" : "+") + a.k(2, b.getUTCHours()) + ":" + a.k(2, b.getUTCMinutes())
    };
    a.k = function(a, b) {
      return (Array(a + 1).join(0) + b).slice(-a)
    };
    a.ra = {};
    a.doPostbacks = function(c) {
      if ("object" == typeof c)
        if (a.nb(c), "object" == typeof a.AudienceManagement && "function" == typeof a.AudienceManagement.isReady && a.AudienceManagement.isReady() && "function" == typeof a.AudienceManagement.passData) a.AudienceManagement.passData(c);
        else if ("object" == typeof c && "object" == typeof c.dests)
        for (var b = 0; b < c.dests.length; ++b) dest =
          c.dests[b], "object" == typeof dest && "string" == typeof dest.c && "string" == typeof dest.id && "aa." == dest.id.substr(0, 3) && (a.ra[dest.id] = new Image, a.ra[dest.id].alt = "", a.ra[dest.id].src = dest.c)
    };
    a.mb = function(c) {
      a.i || a.vb();
      a.i.push(c);
      a.la = a.C();
      a.Na()
    };
    a.vb = function() {
      a.i = a.xb();
      a.i || (a.i = [])
    };
    a.xb = function() {
      var c, b;
      if (a.qa()) {
        try {
          (b = k.localStorage.getItem(a.oa())) && (c = k.JSON.parse(b))
        } catch (d) {}
        return c
      }
    };
    a.qa = function() {
      var c = !0;
      a.trackOffline && a.offlineFilename && k.localStorage && k.JSON || (c = !1);
      return c
    };
    a.Ea = function() {
      var c = 0;
      a.i && (c = a.i.length);
      a.q && c++;
      return c
    };
    a.ja = function() {
      if (a.q && (a.B && a.B.complete && a.B.F && a.B.ua(), a.q)) return;
      a.Fa = q;
      if (a.pa) a.la > a.N && a.La(a.i), a.ta(500);
      else {
        var c = a.hb();
        if (0 < c) a.ta(c);
        else if (c = a.Ba()) a.q = 1, a.zb(c), a.Db(c)
      }
    };
    a.ta = function(c) {
      a.Fa || (c || (c = 0), a.Fa = setTimeout(a.ja, c))
    };
    a.hb = function() {
      var c;
      if (!a.trackOffline || 0 >= a.offlineThrottleDelay) return 0;
      c = a.C() - a.Ka;
      return a.offlineThrottleDelay < c ? 0 : a.offlineThrottleDelay - c
    };
    a.Ba = function() {
      if (0 < a.i.length) return a.i.shift()
    };
    a.zb = function(c) {
      if (a.debugTracking) {
        var b = "AppMeasurement Debug: " + c;
        c = c.split("&");
        var d;
        for (d = 0; d < c.length; d++) b += "\n\t" + a.unescape(c[d]);
        a.yb(b)
      }
    };
    a.Za = function() {
      return a.marketingCloudVisitorID || a.analyticsVisitorID
    };
    a.X = !1;
    var s;
    try {
      s = JSON.parse('{"x":"y"}')
    } catch (x) {
      s = null
    }
    s && "y" == s.x ? (a.X = !0, a.W = function(a) {
      return JSON.parse(a)
    }) : k.$ && k.$.parseJSON ? (a.W = function(a) {
      return k.$.parseJSON(a)
    }, a.X = !0) : a.W = function() {
      return null
    };
    a.Db = function(c) {
      var b, d, f;
      a.Za() && 2047 < c.length && ("undefined" !=
        typeof XMLHttpRequest && (b = new XMLHttpRequest, "withCredentials" in b ? d = 1 : b = 0), b || "undefined" == typeof XDomainRequest || (b = new XDomainRequest, d = 2), b && (a.AudienceManagement && a.AudienceManagement.isReady() || 0 != a.usePostbacks) && (a.X ? b.xa = !0 : b = 0));
      !b && a.Oa && (c = c.substring(0, 2047));
      !b && a.d.createElement && (0 != a.usePostbacks || a.AudienceManagement && a.AudienceManagement.isReady()) && (b = a.d.createElement("SCRIPT")) && "async" in b && ((f = (f = a.d.getElementsByTagName("HEAD")) && f[0] ? f[0] : a.d.body) ? (b.type = "text/javascript",
        b.setAttribute("async", "async"), d = 3) : b = 0);
      b || (b = new Image, b.alt = "", b.abort || "undefined" === typeof k.InstallTrigger || (b.abort = function() {
        b.src = q
      }));
      b.za = function() {
        try {
          b.F && (clearTimeout(b.F), b.F = 0)
        } catch (a) {}
      };
      b.onload = b.ua = function() {
        b.za();
        a.lb();
        a.fa();
        a.q = 0;
        a.ja();
        if (b.xa) {
          b.xa = !1;
          try {
            a.doPostbacks(a.W(b.responseText))
          } catch (c) {}
        }
      };
      b.onabort = b.onerror = b.Ca = function() {
        b.za();
        (a.trackOffline || a.pa) && a.q && a.i.unshift(a.kb);
        a.q = 0;
        a.la > a.N && a.La(a.i);
        a.fa();
        a.ta(500)
      };
      b.onreadystatechange = function() {
        4 ==
          b.readyState && (200 == b.status ? b.ua() : b.Ca())
      };
      a.Ka = a.C();
      if (1 == d || 2 == d) {
        var e = c.indexOf("?");
        f = c.substring(0, e);
        e = c.substring(e + 1);
        e = e.replace(/&callback=[a-zA-Z0-9_.\[\]]+/, "");
        1 == d ? (b.open("POST", f, !0), b.send(e)) : 2 == d && (b.open("POST", f), b.send(e))
      } else if (b.src = c, 3 == d) {
        if (a.Ia) try {
          f.removeChild(a.Ia)
        } catch (g) {}
        f.firstChild ? f.insertBefore(b, f.firstChild) : f.appendChild(b);
        a.Ia = a.B
      }
      b.F = setTimeout(function() {
        b.F && (b.complete ? b.ua() : (a.trackOffline && b.abort && b.abort(), b.Ca()))
      }, 5E3);
      a.kb = c;
      a.B = k["s_i_" +
        a.replace(a.account, ",", "_")] = b;
      if (a.useForcedLinkTracking && a.J || a.A) a.forcedLinkTrackingTimeout || (a.forcedLinkTrackingTimeout = 250), a.ga = setTimeout(a.fa, a.forcedLinkTrackingTimeout)
    };
    a.lb = function() {
      if (a.qa() && !(a.Ja > a.N)) try {
        k.localStorage.removeItem(a.oa()), a.Ja = a.C()
      } catch (c) {}
    };
    a.La = function(c) {
      if (a.qa()) {
        a.Na();
        try {
          k.localStorage.setItem(a.oa(), k.JSON.stringify(c)), a.N = a.C()
        } catch (b) {}
      }
    };
    a.Na = function() {
      if (a.trackOffline) {
        if (!a.offlineLimit || 0 >= a.offlineLimit) a.offlineLimit = 10;
        for (; a.i.length >
          a.offlineLimit;) a.Ba()
      }
    };
    a.forceOffline = function() {
      a.pa = !0
    };
    a.forceOnline = function() {
      a.pa = !1
    };
    a.oa = function() {
      return a.offlineFilename + "-" + a.visitorNamespace + a.account
    };
    a.C = function() {
      return (new Date).getTime()
    };
    a.Ga = function(a) {
      a = a.toLowerCase();
      return 0 != a.indexOf("#") && 0 != a.indexOf("about:") && 0 != a.indexOf("opera:") && 0 != a.indexOf("javascript:") ? !0 : !1
    };
    a.setTagContainer = function(c) {
      var b, d, f;
      a.Eb = c;
      for (b = 0; b < a._il.length; b++)
        if ((d = a._il[b]) && "s_l" == d._c && d.tagContainerName == c) {
          a.Q(d);
          if (d.lmq)
            for (b =
              0; b < d.lmq.length; b++) f = d.lmq[b], a.loadModule(f.n);
          if (d.ml)
            for (f in d.ml)
              if (a[f])
                for (b in c = a[f], f = d.ml[f], f) !Object.prototype[b] && ("function" != typeof f[b] || 0 > ("" + f[b]).indexOf("s_c_il")) && (c[b] = f[b]);
          if (d.mmq)
            for (b = 0; b < d.mmq.length; b++) f = d.mmq[b], a[f.m] && (c = a[f.m], c[f.f] && "function" == typeof c[f.f] && (f.a ? c[f.f].apply(c, f.a) : c[f.f].apply(c)));
          if (d.tq)
            for (b = 0; b < d.tq.length; b++) a.track(d.tq[b]);
          d.s = a;
          break
        }
    };
    a.Util = {
      urlEncode: a.escape,
      urlDecode: a.unescape,
      cookieRead: a.cookieRead,
      cookieWrite: a.cookieWrite,
      getQueryParam: function(c, b, d) {
        var f;
        b || (b = a.pageURL ? a.pageURL : k.location);
        d || (d = "&");
        return c && b && (b = "" + b, f = b.indexOf("?"), 0 <= f && (b = d + b.substring(f + 1) + d, f = b.indexOf(d + c + "="), 0 <= f && (b = b.substring(f + d.length + c.length + 1), f = b.indexOf(d), 0 <= f && (b = b.substring(0, f)), 0 < b.length))) ? a.unescape(b) : ""
      }
    };
    a.G = "supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData".split(" ");
    a.g = a.G.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" "));
    a.ma = "timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" ");
    a.O = a.ma.slice(0);
    a.wa = "account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData usePostbacks AudienceManagement".split(" ");
    for (n = 0; 250 >= n; n++) 76 > n && (a.g.push("prop" + n), a.O.push("prop" + n)), a.g.push("eVar" + n), a.O.push("eVar" + n), 6 > n && a.g.push("hier" + n), 4 > n && a.g.push("list" + n);
    n = "pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest".split(" ");
    a.g = a.g.concat(n);
    a.G = a.G.concat(n);
    a.ssl = 0 <= k.location.protocol.toLowerCase().indexOf("https");
    a.charSet = "UTF-8";
    a.contextData = {};
    a.offlineThrottleDelay = 0;
    a.offlineFilename =
      "AppMeasurement.offline";
    a.Ka = 0;
    a.la = 0;
    a.N = 0;
    a.Ja = 0;
    a.linkDownloadFileTypes = "exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx";
    a.w = k;
    a.d = k.document;
    try {
      if (a.Oa = !1, navigator) {
        var y = navigator.userAgent;
        if ("Microsoft Internet Explorer" == navigator.appName || 0 <= y.indexOf("MSIE ") || 0 <= y.indexOf("Trident/") && 0 <= y.indexOf("Windows NT 6")) a.Oa = !0
      }
    } catch (z) {}
    a.fa = function() {
      a.ga && (k.clearTimeout(a.ga), a.ga = q);
      a.l && a.J && a.l.dispatchEvent(a.J);
      a.A && ("function" == typeof a.A ? a.A() : a.l && a.l.href && (a.d.location =
        a.l.href));
      a.l = a.J = a.A = 0
    };
    a.Ma = function() {
      a.b = a.d.body;
      a.b ? (a.v = function(c) {
        var b, d, f, e, g;
        if (!(a.d && a.d.getElementById("cppXYctnr") || c && c["s_fe_" + a._in])) {
          if (a.ya)
            if (a.useForcedLinkTracking) a.b.removeEventListener("click", a.v, !1);
            else {
              a.b.removeEventListener("click", a.v, !0);
              a.ya = a.useForcedLinkTracking = 0;
              return
            } else a.useForcedLinkTracking = 0;
          a.clickObject = c.srcElement ? c.srcElement : c.target;
          try {
            if (!a.clickObject || a.M && a.M == a.clickObject || !(a.clickObject.tagName || a.clickObject.parentElement || a.clickObject.parentNode)) a.clickObject =
              0;
            else {
              var m = a.M = a.clickObject;
              a.ka && (clearTimeout(a.ka), a.ka = 0);
              a.ka = setTimeout(function() {
                a.M == m && (a.M = 0)
              }, 1E4);
              f = a.Ea();
              a.track();
              if (f < a.Ea() && a.useForcedLinkTracking && c.target) {
                for (e = c.target; e && e != a.b && "A" != e.tagName.toUpperCase() && "AREA" != e.tagName.toUpperCase();) e = e.parentNode;
                if (e && (g = e.href, a.Ga(g) || (g = 0), d = e.target, c.target.dispatchEvent && g && (!d || "_self" == d || "_top" == d || "_parent" == d || k.name && d == k.name))) {
                  try {
                    b = a.d.createEvent("MouseEvents")
                  } catch (n) {
                    b = new k.MouseEvent
                  }
                  if (b) {
                    try {
                      b.initMouseEvent("click",
                        c.bubbles, c.cancelable, c.view, c.detail, c.screenX, c.screenY, c.clientX, c.clientY, c.ctrlKey, c.altKey, c.shiftKey, c.metaKey, c.button, c.relatedTarget)
                    } catch (q) {
                      b = 0
                    }
                    b && (b["s_fe_" + a._in] = b.s_fe = 1, c.stopPropagation(), c.stopImmediatePropagation && c.stopImmediatePropagation(), c.preventDefault(), a.l = c.target, a.J = b)
                  }
                }
              }
            }
          } catch (r) {
            a.clickObject = 0
          }
        }
      }, a.b && a.b.attachEvent ? a.b.attachEvent("onclick", a.v) : a.b && a.b.addEventListener && (navigator && (0 <= navigator.userAgent.indexOf("WebKit") && a.d.createEvent || 0 <= navigator.userAgent.indexOf("Firefox/2") &&
        k.MouseEvent) && (a.ya = 1, a.useForcedLinkTracking = 1, a.b.addEventListener("click", a.v, !0)), a.b.addEventListener("click", a.v, !1))) : setTimeout(a.Ma, 30)
    };
    a.Ma();
    a.loadModule("ActivityMap")
  }

  function s_gi(a) {
    var k, q = window.s_c_il,
      r, n, t = a.split(","),
      u, s, x = 0;
    if (q)
      for (r = 0; !x && r < q.length;) {
        k = q[r];
        if ("s_c" == k._c && (k.account || k.oun))
          if (k.account && k.account == a) x = 1;
          else
            for (n = k.account ? k.account : k.oun, n = k.allAccounts ? k.allAccounts : n.split(","), u = 0; u < t.length; u++)
              for (s = 0; s < n.length; s++) t[u] == n[s] && (x = 1);
        r++
      }
    x || (k = new AppMeasurement);
    k.setAccount ? k.setAccount(a) : k.sa && k.sa(a);
    return k
  }
  AppMeasurement.getInstance = s_gi;
  window.s_objectID || (window.s_objectID = 0);

  function s_pgicq() {
    var a = window,
      k = a.s_giq,
      q, r, n;
    if (k)
      for (q = 0; q < k.length; q++) r = k[q], n = s_gi(r.oun), n.setAccount(r.un), n.setTagContainer(r.tagContainerName);
    a.s_giq = 0
  }
  s_pgicq();

  s = new AppMeasurement();
  s.account = (function() {
    var rsid = [];
    if ((window.location.hostname == 'www.jcpenney.com') || (window.location.hostname == 'beta.jcpenney.com') || (window.location.hostname == 'stores.jcpenney.com') || (window.location.hostname == 'registry.jcpenney.com') || (window.location.hostname == 'm.jcpenney.com') || (window.location.hostname == 'nexus.ensighten.com')) {
      rsid.push('jcpenneyprod');
    }
    if ((!(window.location.hostname == 'www.jcpenney.com') && !(window.location.hostname == 'beta.jcpenney.com') && !(window.location.hostname == 'stores.jcpenney.com') && !(window.location.hostname == 'registry.jcpenney.com') && !(window.location.hostname == 'm.jcpenney.com') && !(window.location.hostname == 'nexus.ensighten.com'))) {
      rsid.push('jcpenneydev');
    }
    return rsid.join(',');
  })();

  /************************** CONFIG SECTION **************************/
  s.trackingServer = 'jcpenney.d1.sc.omtrdc.net';
  s.visitorNamespace = 'jcpenney';
  s.charSet = 'UTF-8';
  s.trackDownloadLinks = true;
  s.trackExternalLinks = true;
  s.trackInlineStats = false;
  s.linkDownloadFileTypes = 'exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx';
  s.linkInternalFilters = 'javascript:,jcpenney.com,hlserve.com';
  s.linkLeaveQueryString = false;
  s.linkTrackVars = 'None';
  s.linkTrackEvents = 'None';
  s.visitor = window.Visitor.getInstance('CEEB350F5746CDE97F000101@AdobeOrg');
  s.usePlugins = true;

  s.doPlugins = function(s) {
    s.trackOffline = false;
    s.events = s.events ? s.events : '';
    s.cookieDomain = document.location.hostname;
    s.pageURL = document.location.href;
    s.currencyCode = Bootstrapper.data.resolve('Manage.common.Page_Currency');

    // to expire cookies
    s.expDate = new Date();
    s.expDate.setDate(s.expDate.getDate() - 1);

    s.prop7 = ('http://' + document.location.hostname + document.location.pathname).toLowerCase() + (document.location.search || '');

    // events
    s.events = s.getEvents();

    // products
    s.products = s.getProducts();

    if (!s.pageLoaded) {
      if (s.prop12) {
        s.prop12 += (s.prop12.indexOf(s.version) == -1) ? (':' + s.version) : '';
      }

      s.prop17 = s.getPreviousValue(s.pageName, 'c17', '');
      s.eVar53 = s.getPreviousValue(s.prop11, 'v53', '');
      s.eVar50 = '+1';

      s.eVar7 = s.getTimeParting('n', '-6');

      if (s.campaign) {
        s.eVar56 = s.crossVisitParticipation(s.campaign, 'v56', '7', '5', '>', 'purchase', 0);
      }
      // campaign click-throughs
      s.clickPast(s.campaign, 'event10', 'event11');

      // persistent cart amount
      if (window.digitalData && digitalData.cart && digitalData.cart.attributes && digitalData.cart.attributes.cartTotal) {
        s.events = s.apl(s.events, 'event70=' + digitalData.cart.attributes.cartTotal, ',', 2);
        if (s.pageName && s.pageName.indexOf('checkout shopping cart') > -1) {
          s.eVar65 = digitalData.cart.attributes.cartTotal;
        }
      }

      // switch from mobile site
      if (s.Util.getQueryParam('stop_mobi')) {
        s.events = s.apl(s.events, 'event48', ',', 2);
      }

      // product Collection View Event 115
      if (s.Util.getQueryParam('productCollectionView')) {
        var eve115 = s.Util.getQueryParam('productCollectionView');
        if (eve115 === "yes") {
          s.events = s.apl(s.events, 'event115', ',', 2);
        }
      }

      // internal campaigns
      if (s.eVar19) {
        s.events = s.apl(s.events, 'event13', ',', 2);

        if (!s.products) {
          s.productNum = s.getProductNum();
          s.products = ';internalcampaign' + s.productNum;
        }
      }
      // internal monetization Ads
      if (s.eVar60 && s.eVar60 != 'non-monetization ads') {

        s.events = s.apl(s.events, 'event44', ',', 2);

        if (!s.products) {
          s.productNum = s.getProductNum();
          s.products = ';monetizationAds' + s.productNum;
        }
      }
      if (s.list3) {
        s.events = s.apl(s.events, 'event12', ',', 2);
      }

      // navigation clicks
      s.prop23 = s.Util.cookieRead('c23');
      if (s.prop23) {
        s.events = s.apl(s.events, 'event15', ',', 2);
        s.Util.cookieWrite('c23', '', s.expDate);

        if (!s.products) {
          s.productNum = s.getProductNum();
          s.products = ';sitenavigation' + s.productNum;
        }
      }

      // delete cross-sell cookie
      s.Util.cookieWrite('v22', '', s.expDate);

      // internal search
      if (s.prop13) {
        if (!s.eVar25 || s.eVar25 == '0') {
          s.eVar25 = 'zero';
        }

        s.prop13 = pageDataTracker.stripSpecialChars(s.prop13);
        if (s.prop13) {
          s.eVar24 = 'D=c13';
        }

        var term = s.getValOnce(s.prop13, 'c13', 0);
        if (term) {
          s.eVar24 = 'D=c13';
          s.eVar58 = '+1';
          s.events = s.apl(s.events, 'event16', ',', 2);
          if (s.eVar25 == 'zero') {
            s.events = s.apl(s.events, 'event17', ',', 2);
          }

          if (!s.products) {
            s.productNum = s.getProductNum();
            s.products = ';productsearch' + s.productNum;
          }
        }

        if (s.Util.getQueryParam('predictiveDetail')) {
          s.eVar15 = s.Util.getQueryParam('predictiveDetail');
          s.events = s.apl(s.events, 'event100', ',', 2);
        } else if (s.eVar26 && s.eVar26 != 'recommended') {
          s.eVar15 = 'non-predictive search'
        }
      }

      // search result clicks
      if (s.Util.cookieRead('e18')) {
        s.events = s.apl(s.events, 'event18', ',', 2);
        if (s.Util.cookieRead('e54')) {
          s.events = s.apl(s.events, 'event54=' + s.Util.cookieRead('e54'), ',', 2);
          s.Util.cookieWrite('e54', '', s.expDate);
        }
        if (s.Util.cookieRead('c13') && s.isNewSearch(s.Util.cookieRead('c13'))) {
          s.events = s.apl(s.events, 'event86', ',', 2);
        }
      }
      s.Util.cookieWrite('e18', '', s.expDate);

      try {

        if (typeof window.digitalData !== "undefined" && window.digitalData !== null && typeof digitalData.page !== "undefined" && digitalData.page !== null && typeof digitalData.page.category !== "undefined" && typeof digitalData.page.category !== null && typeof digitalData.page.category.subCategory1 !== "undefined" && typeof digitalData.page.category.subCategory1 !== null && typeof digitalData.page.category.department !== "undefined" && typeof digitalData.page.category.department !== null && typeof digitalData.page.sbResultsInfo !== "undefined" && typeof digitalData.page.sbResultsInfo !== null && typeof digitalData.page.sbResultsInfo.resultsPageNumber !== "undefined" && digitalData.page.sbResultsInfo.resultsPageNumber !== null) {


          var subCategoryValue = digitalData.page.category.subCategory1 ? digitalData.page.category.subCategory1 : '';
          var departmentValue = digitalData.page.category.department ? digitalData.page.category.department : '';
          var categoryValue = departmentValue + '|' + subCategoryValue;
          var resultsPageNumber = digitalData.page.sbResultsInfo ? digitalData.page.sbResultsInfo.resultsPageNumber : '';
          if (categoryValue && !resultsPageNumber) {
            var previousCategoryValue = s.Util.cookieRead('v68')
            Bootstrapper.Cookies.set('v68', categoryValue);
            if (previousCategoryValue !== categoryValue) {
              s.events = s.apl(s.events, 'event131', ',', 2);
            }
          }
        }
      } catch (ex) {}

      // category result clicks
      if (s.Util.cookieRead('e130')) {

        s.events = s.apl(s.events, 'event130', ',', 2);
        if (s.Util.cookieRead('e132')) {

          s.events = s.apl(s.events, 'event132=' + s.Util.cookieRead('e132'), ',', 2);
          s.Util.cookieWrite('e132', '', s.expDate);
        }
      }
      s.Util.cookieWrite('e130', '', s.expDate);

      if (s.prop5) {
        s.eVar57 = '+1';
      }

      if (s.eVar62) {
        s.events = s.apl(s.events, 'event47=' + s.eVar62, ',', 2);
        s.eVar62 = '+' + s.eVar62;
      }

      // product finding methods
      if (s.prop13) {
        s.eVar30 = 'internal search';
      } else if (s.eVar19) {
        s.eVar30 = 'internal campaign';
      } else if (s.prop23) {
        s.eVar30 = s.prop23.substring(0, s.prop23.indexOf(':')) + ' navigation';
      } else if (s.events.match(/event14(,|$)/g) !== null) {
        s.eVar30 = 'cross-sell';
      } else if (s.campaign) {
        s.eVar30 = 'external campaign';
      } else if (s.eVar60) {
        s.eVar30 = 'internal monetization ads';
      } else if (s.purchaseID) {
        s.eVar30 = 'unknown at time of purchase';
      }

      if (s.eVar30) {
        // only set defaults when no binding to actual products will occur
        if (!s.eVar19) {
          s.eVar19 = 'non-internal campaign';
        }
        if (!s.eVar23) {
          s.eVar23 = 'non-site navigation';
        }
        if (!s.eVar24) {
          s.eVar24 = s.eVar25 = s.eVar26 = 'non-internal search';
        }
        if (!s.eVar60) {
          s.eVar60 = 'non-monetization ads';
        }

        if (!s.products) {
          s.productNum = s.getProductNum();
          s.products = ';findingmethods' + s.productNum;
        }
      }

      s.pageLoaded = true;
    }

    // form errors
    if (s.list1) {
      if (s.linkName) {
        s.linkTrackVars = s.apl(s.linkTrackVars, 'events', ',', 2);
        s.linkTrackEvents = s.apl(s.linkTrackEvents, 'event42', ',', 2);
      }
      s.events = s.apl(s.events, 'event42', ',', 2);
      if (eventData && eventData.eventName && eventData.eventName == "couponApplied") {
        s.events = s.events.replace(",event42", '')
      }
    }


    // sort + filter
    if (s.prop29) {
      s.eVar29 = 'D=c29';
      s.linkTrackVars = s.apl(s.linkTrackVars, 'eVar29', ',', 2);
      s.linkTrackVars = s.apl(s.linkTrackVars, 'prop13', ',', 2);
      s.linkTrackVars = s.apl(s.linkTrackVars, 'eVar24', ',', 2);

      if (!s.products) {
        s.products = ';productfilter' + s.productNum;
      }
    }
    if (s.eVar27 && !s.products) {
      s.productNum = s.getProductNum();
      s.products = ';productsort' + s.productNum;
    }

    // checkout type
    s.eVar42 = s.Util.cookieRead('v42');
    if (!s.eVar42 && s.events.indexOf('scCheckout') > -1) {
      s.eVar42 = s.prop39 && s.prop39.indexOf('logged-in') > -1 ? 'standard' : 'guest';
    }

    //microservice debugSource
    //we will enable this once debug source is added to digitalData
    // if(typeof digitalData!=="undefined" && digitalData!==null && typeof digitalData.page!=="undefined" &&  digitalData.page!==null &  typeof digitalData.page.attributes!=="undefined"&&digitalData.page.attributes!==null && typeof digitalData.page.attributes.debugSource!=="undefined" &&digitalData.page.attributes.debugSource!==null ){
    //   eVar70 = digitalData.page.attributes.debugSource; 
    // }

    s.tnt = s.trackTNT();

    s.linkTrackVars = s.apl(s.linkTrackVars, 'products', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'events', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'channel', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'server', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'prop1', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'prop2', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'prop3', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'prop6', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'prop7', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'prop10', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'prop11', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'prop17', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'prop19', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'prop44', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'eVar1', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'eVar2', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'eVar3', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'eVar7', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'eVar11', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'eVar16', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'eVar17', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'eVar42', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'eVar44', ',', 2);
    s.linkTrackVars = s.apl(s.linkTrackVars, 'eVar53', ',', 2);
    if (window.eventData && eventData.BannerName && eventData.BannerName != '') {
      s.linkTrackVars = s.apl(s.linkTrackVars, 'prop18', ',', 2);
      s.prop18 = eventData.BannerName;
    }

    try {
      s.eVar5 = mboxFactoryDefault.getPCId().getId();
    } catch (ex) {}

    /* dynamic variables */
    s.purchaseID = s.eVar9 ? s.eVar9 : '';
    s.prop15 = 'D=r';
    s.eVar1 = s.prop1 ? 'D=c1' : '';
    s.eVar2 = s.prop2 ? 'D=c2' : '';
    s.eVar3 = s.prop3 ? 'D=c3' : '';
    s.eVar11 = s.prop11 ? 'D=c11' : '';
    s.eVar16 = s.pageName ? 'D=pageName' : '';
    s.eVar17 = s.prop17 ? 'D=c17' : '';
    s.eVar23 = s.prop23 ? 'D=c23' : '';
    s.eVar31 = s.prop31 ? 'D=c31' : '';
    s.eVar33 = s.prop33 ? 'D=c33' : '';
    s.eVar39 = s.prop39 ? 'D=c39' : '';
    s.eVar44 = s.prop44 ? 'D=c44' : '';
    s.eVar45 = s.prop45 ? 'D=c45' : '';
    s.eVar46 = s.prop46 ? 'D=c46' : '';
    s.eVar47 = s.prop47 ? 'D=c47' : '';
    s.eVar48 = 'D=mid';

    if (s.linkName && s.linkName == 'openModal') {
      if (s.prop44 && s.prop44 == 'desktop') {
        s.pageName = "d:" + s.pageName
      } else if (s.prop44 && (s.prop44 == 'mobile' || s.prop44 == 'tablet')) {
        s.pageName = "r:" + s.pageName
      }
    }

    if (window.digitalData) {
      if (digitalData.user && digitalData.user.profile && digitalData.user.profile.profileInfo && digitalData.user.profile.profileInfo.itemsInSaveForLater) {
        var itemsinsaveforlater = digitalData.user.profile.profileInfo.itemsInSaveForLater;
        if (itemsinsaveforlater !== '') {
          s.prop20 = itemsinsaveforlater;
        }
      }
    }

    if (window.digitalData) {
      if (digitalData.page && digitalData.page.sbResultsInfo && digitalData.page.sbResultsInfo.viewType) {
        var eventaction = digitalData.page.sbResultsInfo.viewType;
        if (eventaction !== '') {
          s.prop24 = eventaction;
        }
      }
    }



    //Performance Timing Plugin
    s.performanceTiming()
  };

  s.loadModule("Media");


  /************************** PLUGINS SECTION *************************/

  s.loadModule("Media");

  /************************** PLUGINS SECTION *************************/

  /*
   * Get the current "fake" product number
   */
  s.getProductNum = function() {
    var s = this,
      pn, e = new Date();
    if (!s.c_r('pn')) pn = 1;
    else pn = parseInt(s.c_r('pn')) + 1;
    e.setTime(e.getTime() + (30 * 86400000));
    s.c_w('pn', pn, e);

    return pn;
  };

  s.isNewSearch = function(term) {
    if (!window.sessionStorage) {
      return true;
    }

    var searchTerms = sessionStorage.getItem('searchTerms');
    if (searchTerms === null) {
      sessionStorage.setItem('searchTerms', term);
      return true;
    } else {
      var terms = decodeURIComponent(sessionStorage.getItem('searchTerms')).split('|');
      for (var i = 0; i < terms.length; i++) {
        if (term == terms[i]) {
          return false;
        }
      }
      if (terms.length > 4) {
        terms.shift();
      }
      sessionStorage.setItem('searchTerms', terms.join('|') + '|' + term);
      return true;
    }
  };

  s.getEvents = function() {
    var events = [],
      eventString = '';

    if (window.digitalData) {
      if (!s.linkName && digitalData.page && digitalData.page.pageInfo && !(window.eventData && eventData.eventName && eventData.eventName == 'videoLoaded')) {
        if ((s.purchaseID || s.eVar9) && s.pageName.indexOf('order confirmation') > -1) {
          events.push('purchase');
          events.push('event8');
          events.push('event9');
          events.push('event25');
          events.push('event28');
          events.push('event29');
          events.push('event30');
          events.push('event31');
          if (digitalData.transaction.total.jcpGiftCardAmount) {
            events.push('event93=' + digitalData.transaction.total.jcpGiftCardAmount);
          }
        } else if (s.prop11 == 'redirect' || (s.eVar26 && s.eVar26 == 'redirect')) {
          if (s.prop13 && s.prop13 != s.Util.cookieRead('c13')) {
            events.push('event55');
          }
        } else if (s.prop11 == 'category') {
          events.push('event56');
        } else if (s.prop11 == 'pdp' || s.prop11 == 'ensemble' && !(window.eventData && eventData.eventName && eventData.eventName == 'videoLoaded')) {
          events.push('prodView');
          events.push('event1');
          events.push('event85');
        } else if (s.prop10 && s.prop10 == 'registry pdp' && (window.location.hostname == 'registry.jcpenney.com' || window.location.hostname == 'test-registry.jcpenney.com')) {
          console.log('Skava events push');
          events.push('prodView');
          events.push('event1');
          events.push('event85');
        } else if (s.prop11 == 'checkout') {
          if (s.pageName.indexOf('shopping cart') > -1) {
            if (digitalData.cart.attributes.cartTotal == '0.0' || digitalData.cart.attributes.cartTotal == '0' || digitalData.cart.attributes.cartTotal == '') {
              events.push('scView');
            } else {
              events.push('scView');
              events.push('scOpen');
            }
          } else {
            events.push('scCheckout' + (s.eVar38 ? ':' + s.eVar38 : ''));
            events.push('event27' + (s.eVar38 ? ':' + s.eVar38 : ''));
            if (s.pageName.indexOf('checkout shipping method') > -1) {
              events.push('event78' + (s.eVar38 ? ':' + s.eVar38 : ''));
            } else if (s.pageName.indexOf('checkout shipping') > -1) {
              events.push('event77' + (s.eVar38 ? ':' + s.eVar38 : ''));
            } else if (s.pageName.indexOf('checkout gift wrap') > -1) {
              events.push('event79' + (s.eVar38 ? ':' + s.eVar38 : ''));
            } else if (s.pageName.indexOf('checkout payment') > -1) {
              events.push('event80' + (s.eVar38 ? ':' + s.eVar38 : ''));
            } else if (s.pageName.indexOf('checkout review') > -1) {
              events.push('event81' + (s.eVar38 ? ':' + s.eVar38 : ''));
            }
          }
        }

        // recommendations
        if (s.Util.getQueryParam('rrplacementtype')) {
          events.push('event14');
        }
      } else if (s.linkName) {

        if (s.linkName == 'pdpToolClick' || s.linkName == 'altImageClick') {
          events.push('event23');
          if (s.prop36) {
            if (s.prop36 == 'curation photo upload') {
              events.push('event61');
            } else if (s.prop36 == 'curation photo click') {
              events.push('event62');
            }
          }
        } else if (s.linkName == 'addToRegistry') {
          events.push('event87');
        } else if (s.linkName == 'productOOS') {
          events.push('event88');
        } else if (s.linkName == 'certonaMoreLikeThis') {
          events.push('event89');
        } else if (s.linkName == 'gridLoadMore') {
          events.push('event94');
        } else if (s.linkName == 'bopisChangeZip') {
          events.push('event97');
        } else if (s.linkName == 'cartAdd' || s.linkName == 'carePlanAccept') {
          events.push('scAdd');
          events.push('scOpen');
          events.push('event26');
          if (s.linkName == 'carePlanAccept') {
            events.push('event83');
          }
        } else if (s.linkName == 'accountRegistration') {
          events.push('event2');
          events.push('event3');
          if (s.prop11 && s.prop11 == 'checkout') {
            events.push('event38');
          }
        } else if (s.linkName == 'forgotPassword') {
          events.push('event4');
        } else if (s.linkName == 'financeOfferView') {
          events.push('event5');
        } else if (s.linkName == 'financeOfferAccept') {
          events.push('event6');
        } else if (s.linkName == 'searchResultClick') {
          events.push('event18');
          if (window.digitalData && digitalData.page && digitalData.page.sbResultsInfo && digitalData.page.sbResultsInfo.resultPosition) {
            events.push('event54=') + digitalData.page.sbResultsInfo.resultPosition;
          }
        } else if (s.linkName == 'categoryResultClick') {
          events.push('event130');
          if (window.digitalData && digitalData.page && digitalData.page.sbResultsInfo && digitalData.page.sbResultsInfo.resultPosition) {
            events.push('event132=') + digitalData.page.sbResultsInfo.resultPosition;
          }
        } else if (s.linkName == 'productFiltersApplied' && s.prop29) {
          events.push('event19');
        } else if (s.linkName == 'checkAvailability') {
          events.push('event20');
        } else if (s.linkName == 'selectStore') {
          events.push('event32');
        } else if (s.linkName == 'changeStore') {
          events.push('event33');
        } else if (s.linkName == 'findCoupon') {
          events.push('event39');
        } else if (s.linkName == 'couponApplied') {
          events.push('event40');
          if (eventData.cart.couponRewardsInfo[0].couponApplyMethod == 'selected from list') {
            events.push('event98');
          } else if (eventData.cart.couponRewardsInfo[0].couponApplyMethod == 'manual') {
            events.push('event99');
          }

        } else if (s.linkName == 'linkRewardsAccount') {
          events.push('event63');
        }



        // else if (s.linkName == 'productCheckoutOOS') {
        //   events.push('event36');
        //   if (window.eventData) {
        //     if (eventData.product[0].productInfo.productCurrentSellingPrice !== null) {
        //       events.push('event37=' + eventData.product[0].productInfo.productCurrentSellingPrice.toFixed(2));
        //     }
        //   }

        // else if (s.linkName == 'modifyCreditCardAtCheckout') {
        //   if (eventData.page.pageInfo.eventAction == 'edit') {
        //     events.push('event120');
        //   } else if (eventData.page.pageInfo.eventAction == 'delete') {
        //     events.push('event121');
        //   }
        else if (s.linkName == 'createRegistry') {
          events.push('event111');
        } else if (s.linkName == 'updateRegistry') {
          events.push('event125');
        } else if (s.linkName == 'deleteRegistry') {
          events.push('event126');
        }
        //else if (s.linkName == 'modifyRegistry') {
        //events.push('event1');
        //}
        else if (s.linkName == 'addToRegistrySkava') {
          events.push('event112');
        } else if (s.linkName == 'cartAddDebug') {
          events.push('event200');
        } else if (s.linkName == 'updateRewardsInfo') {
          events.push('event113');
        } else if (s.linkName == 'plccLinkToRewardsProfile') {
          events.push('event114');
          // } else if (s.linkName == 'loginAttempted') {
          // events.push('event140');
          // } else if (s.linkName == 'loginSuccess') {
          // events.push('event141');
          // } else if (s.linkName == 'loginFailed') {
          // events.push('event142');
          //}else if (s.linkName == 'shipToStoreCheckout') {
          // events.push('event122');
          // }else if (s.linkName == 'createNewList') {
          //   events.push('event116');
          // }else if (s.linkName == 'deleteList') {
          //   events.push('event117');
          // }else if (s.linkName == 'removeItemFromList') {
          //   events.push('event118');
          // }else if (s.linkName == 'moveItemBetweenList') {
          //   events.push('event119');
        } else if (s.linkName == 'saveProduct') {
          events.push('event65');
        } else if (s.linkName == 'moveSavedProductToCart') {
          events.push('event66');
          events.push('event26');
        } else if (s.linkName == 'saveProductInCart') {
          events.push('event67');
        } else if (s.linkName == "sameDayPickup" || s.linkName == "checkoutSameDayPickup") {
          events.push('event76');
          // } else if (s.linkName == 'changeZipCode') {
          //   events.push('event124');
        } else if (s.linkName == 'carePlanView') {
          events.push('event82');
        } else if (s.linkName == 'cartUpdate') {
          var prod = window.eventData && eventData.product && eventData.product[0] ? eventData.product[0].productInfo : {};
          if (prod && prod.productPPID && prod.productQuantity && prod.productPrevQuantity) {
            var newQty = parseInt(prod.productQuantity || '1'),
              oldQty = parseInt(prod.productPrevQuantity || '1');
            if (oldQty > newQty) {
              events.push('event57');
              if (newQty == 0) {
                events.push('scRemove');
              }
            } else if (oldQty < newQty) {
              events.push('event26');
            }
          }
        }
      }

      if (s.prop39 && s.prop39.indexOf('logged-in') > -1) {
        events.push('event3');

      }
    }

    for (var i = 0; i < events.length; i++) {
      eventString = s.apl(eventString, events[i], ',', 2);
      if (s.linkName) {
        if (events[i].indexOf('=') > -1) {
          events[i] = events[i].substring(0, events[i].indexOf('='));
        }
        s.linkTrackEvents = s.apl(s.linkTrackEvents, events[i].indexOf(':') > -1 ? events[i].substring(0, events[i].indexOf(':')) : events[i], ',', 2);
      }
    }
    return eventString;
  };

  s.getProducts = function() {
    var products = window.eventData && eventData.product ? eventData.product : digitalData.product;
    if (!products) {
      return '';
    }

    var prodList = [];
    var subTotal, shippingTotal, taxTotal, discountTotal, roundupTotal, giftWrapTotal, associateTotal, rewardsTotal = 0;
    if (s.eVar9 && window.digitalData && digitalData.transaction && digitalData.transaction.total) {
      shippingTotal = parseFloat(digitalData.transaction.total.shippingCost || 0);
      roundupTotal = parseFloat(digitalData.transaction.total.roundUpAmount || 0);
      associateTotal = parseFloat(digitalData.transaction.total.associateDiscount || 0);
      taxTotal = parseFloat(digitalData.transaction.total.totalTax || 0);
      giftWrapTotal = parseFloat(digitalData.transaction.total.giftWrapPrice || digitalData.transaction.total.productGiftWrapPrice || 0);
      subTotal = 0;

      for (var i = 0; i < products.length; i++) {
        var prod = products[i].productInfo,
          price;
        if (prod.productPricingCadence && prod.productPricingCadence.toLowerCase() == 'buy more and save' && prod.productListPrice) {
          price = parseFloat(prod.productListPrice || 0);
        } else {
          price = parseFloat(prod.productCurrentSellingPrice || 0);
        }
        subTotal += price * parseInt(prod.productQuantity || 0);
        if (prod.productCouponAmount) {
          subTotal -= parseFloat(prod.productCouponAmount);
        }
      }

      // calculate total rewards
      var rewards;
      if (window.eventData && eventData.cart && eventData.cart.couponRewardsInfo && eventData.cart.couponRewardsInfo.length > 0) {
        rewards = eventData.cart.couponRewardsInfo;
      } else if (window.digitalData && digitalData.cart && digitalData.cart.couponRewardsInfo && digitalData.cart.couponRewardsInfo.length > 0) {
        rewards = digitalData.cart.couponRewardsInfo;
      }
      if (rewards) {
        for (var i = 0; i < rewards.length; i++) {
          if (rewards[i].rewardAmount) {
            rewardsTotal += parseFloat(rewards[i].rewardAmount);
          }
        }
      }
    }

    for (var i = 0; i < products.length; i++) {
      var prod = products[i].productInfo,
        qty = parseInt(prod.productQuantity || '1'),
        price = parseFloat(prod.productCurrentSellingPrice || '0'),
        listPrice = parseFloat(prod.productListPrice || '0'),
        surchargePrice;
      if (prod.productPricingCadence && prod.productPricingCadence.toLowerCase() == 'buy more and save') {
        price = listPrice;
      }
      // handle cart updates
      if (prod.productPrevQuantity) {
        var prevQty = parseInt(prod.productPrevQuantity || '1');
        qty = qty > prevQty ? (qty - prevQty) : (prevQty - qty);
      }
      var totalSellingPrice = qty * price,
        totalListPrice = qty * listPrice,
        totalPrice, pctTotal, proRatedShipping, proRatedTax, proRatedRoundup, proRatedRewards = 0,
        proRatedGiftWrap, proRatedAssociate;
      totalPrice = totalSellingPrice;
      if (prod.productCouponAmount) {
        totalPrice -= parseFloat(prod.productCouponAmount);
      }
      if (prod.productQuantityDiscount) {
        totalPrice -= parseFloat(prod.productQuantityDiscount);
      }
      //we will enable this once productRewardsAmount is available on digitalData
      //   if(prod.productRewardsAmount){
      //     totalPrice -= parseFloat(prod.productRewardsAmount);
      //   }
      if (s.eVar9) {
        pctTotal = totalPrice / subTotal;
        proRatedShipping = pctTotal * shippingTotal;
        proRatedTax = pctTotal * taxTotal;
        proRatedRoundup = pctTotal * roundupTotal;
        proRatedGiftWrap = pctTotal * giftWrapTotal;
        proRatedRewards = pctTotal * rewardsTotal;
        proRatedAssociate = pctTotal * associateTotal;
        totalPrice -= (proRatedRewards + proRatedAssociate);
        if (prod.productSurchargePrice) {
          surchargePrice = parseFloat(prod.productSurchargePrice || '0') * qty;
        }
      }

      var thisProd;
      if (typeof(prod.productLotId) == 'string') {
        prod.productLotId = [prod.productLotID];
      }
      if (prod.productLotId && prod.productLotId.length > 0) {
        for (var j = 0; j < prod.productLotId.length; j++) {
          thisProd = [
            '',
            prod.productPPID,
            qty,
            totalPrice.toFixed(2),
            '',
            ''
          ];

          var prodEvents = [],
            prodEvars = [];
          prodEvars.push('evar6=' + prod.productLotId[j]);
          if (prod.productName) {
            prodEvars.push('evar4=' + pageDataTracker.stripSpecialChars(prod.productName).toLowerCase());
            if (s.prop5) {
              s.prop16 = pageDataTracker.stripSpecialChars(prod.productName).toLowerCase()
            }

          }

          if (window.digitalData && digitalData.product && digitalData.product[0] && digitalData.product[0].productInfo && digitalData.product[0].productInfo.productCollectionFlag) {
            prodEvars.push('evar13=' + digitalData.product[0].productInfo.productCollectionFlag);
          }

          if (window.digitalData && digitalData.cart && digitalData.cart.attributes && digitalData.cart.attributes.checkoutInitiatePosition) {
            prodEvars.push('prop25=' + digitalData.cart.attributes.checkoutInitiatePosition);
          }

          if (window.digitalData && digitalData.page && digitalData.page.pageInfo && digitalData.page.pageInfo.pageViewport) {
            prodEvars.push('prop26=' + digitalData.page.pageInfo.pageViewport);
          }
          //if (window.digitalData && digitalData.product && digitalData.product[0] && digitalData.product[0].productInfo && digitalData.product[0].productInfo.productShippingMethod) {
          //     prodEvars.push('evar14=' + digitalData.product[0].productInfo.productShippingMethod);
          // }

          if (window.digitalData && digitalData.product && digitalData.product[0] && digitalData.product[0].productInfo && digitalData.product[0].productInfo.productEcoRebatesFlag) {
            prodEvars.push('evar64=' + digitalData.product[0].productInfo.productEcoRebatesFlag);
          }

          if (window.digitalData && digitalData.product && digitalData.product[0] && digitalData.product[0].productInfo && digitalData.product[0].productInfo.productCarePlanFlag) {
            prodEvars.push('evar66=' + digitalData.product[0].productInfo.productCarePlanFlag);
          }

          if (window.digitalData && digitalData.product) {
            var productMarketingLabel = digitalData.product[0].productInfo.productMarketingLabel;
            if (productMarketingLabel == '') {
              prodEvars.push('evar51=' + 'no product marketing label');
            } else if (digitalData.product[0].productInfo.productMarketingLabel !== undefined) {
              prodEvars.push('evar51=' + digitalData.product[0].productInfo.productMarketingLabel);
            }
          }
          if (prod.productPricingCadence) {
            prodEvars.push('evar20=' + prod.productPricingCadence.toLowerCase());
          }
          var recZone = pageDataTracker.getParam('rrplacementtype');
          if (recZone) {
            prodEvars.push('evar21=' + recZone);
          }
          var referringId = s.Util.cookieRead('v22');
          if (referringId) {
            prodEvars.push('evar22=' + referringId);
          }
          if (prod.giftRegistryIndicator) {
            prodEvars.push('evar28=' + prod.giftRegistryIndicator);
          }
          if (prod.productAverageRating || prod.productReviews) {
            prodEvars.push('evar32=' + (prod.productAverageRating || 'no rating') + ':' + (prod.productReviews || 'no reviews'));
          }
          if (!prod.productAverageRating && !prod.productReviews) {
            prodEvars.push('evar32=' + 'no rating' + ':' + 'no reviews');
          }
          if (prod.productSKU) {
            prodEvars.push('evar34=' + prod.productSKU);
          }
          if (prod.productStoreAvailability) {
            prodEvars.push('evar35=' + prod.productStoreAvailability.toLowerCase());
          }
          if (s.prop36) {
            prodEvars.push('evar36=' + s.prop36);
          }
          if (prod.productDeliveryMethod) {
            prodEvars.push('evar41=' + prod.productDeliveryMethod.toLowerCase());
          }
          if (s.Util.cookieRead('e54')) {
            prodEvars.push('evar59=' + s.Util.cookieRead('e54'));
          } else if (prod.resultPosition) {
            prodEvars.push('evar59=' + prod.resultPosition);
          }
          if (s.Util.cookieRead('e132')) {
            prodEvars.push('evar68=' + s.Util.cookieRead('e132'));
          } else if (prod.resultPosition) {
            prodEvars.push('evar68=' + prod.resultPosition);
          }
          if (!s.linkName && (s.prop11 == 'pdp' || s.prop11 == 'ensemble')) {
            prodEvents.push('event85=1');
          }

          if (!s.linkName && s.prop10 == 'registry pdp' && (window.location.hostname == 'registry.jcpenney.com' || window.location.hostname == 'test-registry.jcpenney.com')) {
            console.log('Skava Prod events push');
            prodEvents.push('event85=1');
          }

          if (s.events.indexOf('scAdd') > -1) {
            prodEvars.push('evar63=' + totalPrice.toFixed(2) + ' ' + s.currencyCode);
          } else if (s.events.indexOf('scCheckout') > -1) {
            prodEvents.push('event27=' + totalPrice.toFixed(2));
          }
          if (s.events.match(/event26(,|$)/g) !== null) {
            prodEvents.push('event26=' + totalPrice.toFixed(2));
          } else if (s.events.match(/event57(,|$)/g) !== null) {
            prodEvents.push('event57=' + totalPrice.toFixed(2));
          }

          if (s.eVar9) {
            if (prod.productQuantityDiscount) {
              prodEvents.push('event7=' + prod.productQuantityDiscount);
            }
            if (prod.productCouponAmount) {
              prodEvents.push('event8=' + prod.productCouponAmount);
            }
            if (surchargePrice) {
              prodEvents.push('event9=' + surchargePrice.toFixed(2));
            }
            if (proRatedRewards) {
              prodEvents.push('event25=' + proRatedRewards.toFixed(2));
            }
            if (proRatedShipping) {
              prodEvents.push('event28=' + proRatedShipping.toFixed(2));
            }
            if (proRatedTax) {
              prodEvents.push('event29=' + proRatedTax.toFixed(2));
            }
            if (proRatedRoundup) {
              prodEvents.push('event30=' + proRatedRoundup.toFixed(2));
            }
            if (proRatedGiftWrap) {
              prodEvents.push('event31=' + proRatedGiftWrap.toFixed(2));
            }
            if (totalListPrice) {
              prodEvents.push('event68=' + totalListPrice.toFixed(2));
            }
            if (totalSellingPrice) {
              prodEvents.push('event69=' + totalSellingPrice.toFixed(2));
            }
          }

          thisProd[4] = prodEvents.join('|');
          thisProd[5] = prodEvars.join('|');
          prodList.push(thisProd.join(';'));
        }
      } else {
        thisProd = [
          '',
          prod.productPPID,
          qty,
          totalPrice.toFixed(2),
          '',
          ''
        ];
        prodList.push(thisProd.join(';'));
      }
    }
    return prodList.join(',');
  };

  s.Media.autoTrack = false;
  s.Media.trackMilestones = "50,100";
  s.Media.playerName = "brightcove";
  s.Media.trackUsingContextData = true;
  s.Media.contextDataMapping = {
    "a.media.name": "eVar8,prop8",
    "a.media.timePlayed": "event75",
    "a.media.view": "event72",
    "a.media.milestones": {
      50: "event74",
      100: "event73"
    }
  };

  //Performance Timing Plugin
  s.pte = 'event101,event102,event103,event104,event105,event106,event107,event108,event109,event110'
    //[--------------------------- 1 to 8 ---------------------------][-- 9 --][- 10 -]
  s.ptc = false;

  /*
   * Function p_fo(x,y): Ensures the plugin code is fired only on the 
   *      first call of do_plugins
   */
  s.p_fo = new Function("n", "" + "var s=this;if(!s.__fo){s.__fo=new Object;}if(!s.__fo[n]){s.__fo[n]=" + "new Object;return 1;}else {return 0;}");

  /*                                                                  
   * Plugin: clickPast - version 1.0
   */
  s.clickPast = new Function("scp", "ct_ev", "cp_ev", "cpc", "" + "var s=this,scp,ct_ev,cp_ev,cpc,ev,tct;if(s.p_fo(ct_ev)==1){if(!cpc)" + "{cpc='s_cpc';}ev=s.events?s.events+',':'';if(scp){s.events=ev+ct_ev" + ";s.c_w(cpc,1,0);}else{if(s.c_r(cpc)>=1){s.events=ev+cp_ev;s.c_w(cpc" + ",0,0);}}}");

  /*
   * Plugin: getTimeParting 3.4
   */
  s._tpDST = {
    2012: '3/11,11/4',
    2013: '3/10,11/3',
    2014: '3/9,11/2',
    2015: '3/8,11/1',
    2016: '3/13,11/6',
    2017: '3/12,11/5',
    2018: '3/11,11/4',
    2019: '3/10,11/3'
  }
  s.getTimeParting = new Function("h", "z", "" + "var s=this,od;od=new Date('1/1/2000');if(od.getDay()!=6||od.getMont" + "h()!=0){return'Data Not Available';}else{var H,M,D,U,ds,de,tm,da=['" + "Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturda" + "y'],d=new Date();z=z?z:0;z=parseFloat(z);if(s._tpDST){var dso=s._tp" + "DST[d.getFullYear()].split(/,/);ds=new Date(dso[0]+'/'+d.getFullYea" + "r());de=new Date(dso[1]+'/'+d.getFullYear());if(h=='n'&&d>ds&&d<de)" + "{z=z+1;}else if(h=='s'&&(d>de||d<ds)){z=z+1;}}d=d.getTime()+(d.getT" + "imezoneOffset()*60000);d=new Date(d+(3600000*z));H=d.getHours();M=d" + ".getMinutes();M=(M<10)?'0'+M:M;D=d.getDay();U=' AM';if(H>=12){U=' P" + "M';H=H-12;}if(H==0){H=12;}D=da[D];tm=H+':'+M+U;return(tm+'|'+D);}");

  /** TNT Integration Plugin v1.0*/
  s.trackTNT = new Function("v", "p", "b", "" + "var s=this,n='s_tnt',p=p?p:n,v=v?v:n,r='',pm=false,b=b?b:true;if(s." + "Util.getQueryParam){pm=s.Util.getQueryParam(p);}if(pm){r+=(pm+',');}if(window[v" + "]!=undefined){r+=window[v];}if(b){window[v]='';}return r;");

  /* Plugin: Performance Timing Tracking - 0.11 BETA */
  s.performanceTiming = new Function("v", "" + "var s=this;if(v)s.ptv=v;if(typeof performance!='undefined'){if(perf" + "ormance.timing.loadEventEnd==0){s.pi=setInterval(function(){s.perfo" + "rmanceWrite()},250);}if(!s.ptc||s.linkType=='e'){s.performanceRead(" + ");}else{s.rfe();s[s.ptv]='';}}");
  s.performanceWrite = new Function("", "" + "var s=this;if(performance.timing.loadEventEnd>0)clearInterval(s.pi)" + ";try{if(s.c_r('s_ptc')==''&&performance.timing.loadEventEnd>0){try{" + "var pt=performance.timing;var pta='';pta=s.performanceCheck(pt.fetc" + "hStart,pt.navigationStart);pta+='^^'+s.performanceCheck(pt.domainLo" + "okupStart,pt.fetchStart);pta+='^^'+s.performanceCheck(pt.domainLook" + "upEnd,pt.domainLookupStart);pta+='^^'+s.performanceCheck(pt.connect" + "End,pt.connectStart);pta+='^^'+s.performanceCheck(pt.responseStart," + "pt.connectEnd);pta+='^^'+s.performanceCheck(pt.responseEnd,pt.respo" + "nseStart);pta+='^^'+s.performanceCheck(pt.loadEventStart,pt.domLoad" + "ing);pta+='^^'+s.performanceCheck(pt.loadEventEnd,pt.loadEventStart" + ");pta+='^^'+s.performanceCheck(pt.loadEventEnd,pt.navigationStart);" + "s.c_w('s_ptc',pta);if(sessionStorage&&navigator.cookieEnabled&&s.pt" + "v!='undefined'){var pe=performance.getEntries();var tempPe='';for(v" + "ar i=0;i<pe.length;i++){tempPe+='!';tempPe+=pe[i].name.indexOf('?')" + ">-1?pe[i].name.split('?')[0]:pe[i].name;tempPe+='|'+(Math.round(pe[" + "i].startTime)/1000).toFixed(1)+'|'+(Math.round(pe[i].duration)/1000" + ").toFixed(1)+'|'+pe[i].initiatorType;}sessionStorage.setItem('s_pec" + "',tempPe);}}catch(err){return;}}}catch(err){return;}");
  s.performanceCheck = new Function("a", "b", "" + "if(a>=0&&b>=0){if((a-b)<60000&&((a-b)>=0)){return((a-b)/1000).toFix" + "ed(2);}else{return 600;}}");
  s.performanceRead = new Function("", "" + "var s=this;if(performance.timing.loadEventEnd>0)clearInterval(s.pi)" + ";var cv=s.c_r('s_ptc');if(s.pte){var ela=s.pte.split(',');}if(cv!='" + "'){var cva=s.split(cv,'^^');if(cva[1]!=''){for(var x=0;x<(ela.lengt" + "h-1);x++){s.events=s.apl(s.events,ela[x]+'='+cva[x],',',2);}}s.even" + "ts=s.apl(s.events,ela[ela.length-1],',',2);}s.linkTrackEvents=s.apl" + "(s.linkTrackEvents,s.pte,',',2);s.c_w('s_ptc','',0);if(sessionStora" + "ge&&navigator.cookieEnabled&&s.ptv!='undefined'){s[s.ptv]=sessionSt" + "orage.getItem('s_pec');sessionStorage.setItem('s_pec','',0);}else{s" + "[s.ptv]='sessionStorage Unavailable';}s.ptc=true;");
  /* Remove from Events 0.1 - Performance Specific, 
removes all performance events from s.events once being tracked. */
  s.rfe = new Function("", "" + "var s=this;var ea=s.split(s.events,',');var pta=s.split(s.pte,',');" + "try{for(x in pta){s.events=s.rfl(s.events,pta[x]);s.contextData['ev" + "ents']=s.events;}}catch(e){return;}");
  /* Plugin Utility - RFL (remove from list) 1.0*/
  s.rfl = new Function("l", "v", "d1", "d2", "ku", "" + "var s=this,R=new Array(),C='',d1=!d1?',':d1,d2=!d2?',':d2,ku=!ku?0:" + "1;if(!l)return'';L=l.split(d1);for(i=0;i<L.length;i++){if(L[i].inde" + "xOf(':')>-1){C=L[i].split(':');C[1]=C[0]+':'+C[1];L[i]=C[0];}if(L[i" + "].indexOf('=')>-1){C=L[i].split('=');C[1]=C[0]+'='+C[1];L[i]=C[0];}" + "if(L[i]!=v&&C)R.push(C[1]);else if(L[i]!=v)R.push(L[i]);else if(L[i" + "]==v&&ku){ku=0;if(C)R.push(C[1]);else R.push(L[i]);}C='';}return s." + "join(R,{delim:d2})");

  /* * Plugin Utility: apl v1.1 */
  s.apl = new Function("l", "v", "d", "u", "" + "var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i<a." + "length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCas" + "e()));}}if(!m)l=l?l+d+v:v;return l");

  /*
   * Plugin: getPreviousValue_v1.0 - return previous value of designated
   *   variable (requires split utility)
   */
  s.getPreviousValue = new Function("v", "c", "el", "" + "var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el" + "){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i" + "){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t)" + ":s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?" + "s.c_w(c,v,t):s.c_w(c,'no value',t);return r}");

  /*
   * Plugin: getValOnce_v1.1
   */
  s.getValOnce = new Function("v", "c", "e", "t", "" + "var s=this,a=new Date,v=v?v:'',c=c?c:'s_gvo',e=e?e:0,i=t=='m'?6000" + "0:86400000;k=s.c_r(c);if(v){a.setTime(a.getTime()+e*i);s.c_w(c,v,e" + "==0?0:a);}return v==k?'':v");

  /* * Utility Function: split v1.5 - split a string (JS 1.0 compatible) */
  s.split = new Function("l", "d", "" + "var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x" + "++]=l.substring(0,i);l=l.substring(i+d.length);}return a");

  /* * s.join: 1.0 - Joins an array into a string */
  s.join = new Function("v", "p", "" + "var s = this;var f,b,d,w;if(p){f=p.front?p.front:'';b=p.back?p.back" + ":'';d=p.delim?p.delim:'';w=p.wrap?p.wrap:'';}var str='';for(var x=0" + ";x<v.length;x++){if(typeof(v[x])=='object' )str+=s.join( v[x],p);el" + "se str+=w+v[x]+w;if(x<v.length-1)str+=d;}return f+str+b;");

  /* * Plugin Utility: Replace v1.0 */
  s.repl = new Function("x", "o", "n", "" + "var i=x.indexOf(o),l=n.length;while(x&&i>=0){x=x.substring(0,i)+n+x." + "substring(i+o.length);i=x.indexOf(o,i+l)}return x");

  /*
   *	Plug-in: crossVisitParticipation v1.7 - stacks values from
   *	specified variable in cookie and returns value
   */
  s.crossVisitParticipation = new Function("v", "cn", "ex", "ct", "dl", "ev", "dv", "" + "var s=this,ce;if(typeof(dv)==='undefined')dv=0;if(s.events&&ev){var" + " ay=s.split(ev,',');var ea=s.split(s.events,',');for(var u=0;u<ay.l" + "ength;u++){for(var x=0;x<ea.length;x++){if(ay[u]==ea[x]){ce=1;}}}}i" + "f(!v||v==''){if(ce){s.c_w(cn,'');return'';}else return'';}v=escape(" + "v);var arry=new Array(),a=new Array(),c=s.c_r(cn),g=0,h=new Array()" + ";if(c&&c!=''){arry=s.split(c,'],[');for(q=0;q<arry.length;q++){z=ar" + "ry[q];z=s.repl(z,'[','');z=s.repl(z,']','');z=s.repl(z,\"'\",'');arry" + "[q]=s.split(z,',')}}var e=new Date();e.setFullYear(e.getFullYear()+" + "5);if(dv==0&&arry.length>0&&arry[arry.length-1][0]==v)arry[arry.len" + "gth-1]=[v,new Date().getTime()];else arry[arry.length]=[v,new Date(" + ").getTime()];var start=arry.length-ct<0?0:arry.length-ct;var td=new" + " Date();for(var x=start;x<arry.length;x++){var diff=Math.round((td." + "getTime()-arry[x][1])/86400000);if(diff<ex){h[g]=unescape(arry[x][0" + "]);a[g]=[arry[x][0],arry[x][1]];g++;}}var data=s.join(a,{delim:','," + "front:'[',back:']',wrap:\"'\"});s.c_w(cn,data,e);var r=s.join(h,{deli" + "m:dl});if(ce)s.c_w(cn,'');return r;");



  /* * Plugin Utility: apl v1.1 */
  s.apl = new Function("l", "v", "d", "u", "" + "var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i<a." + "length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCas" + "e()));}}if(!m)l=l?l+d+v:v;return l");

  /*
   * Plugin: getPreviousValue_v1.0 - return previous value of designated
   *   variable (requires split utility)
   */
  s.getPreviousValue = new Function("v", "c", "el", "" + "var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el" + "){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i" + "){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t)" + ":s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?" + "s.c_w(c,v,t):s.c_w(c,'no value',t);return r}");

  /*
   * Plugin: getValOnce_v1.1
   */
  s.getValOnce = new Function("v", "c", "e", "t", "" + "var s=this,a=new Date,v=v?v:'',c=c?c:'s_gvo',e=e?e:0,i=t=='m'?6000" + "0:86400000;k=s.c_r(c);if(v){a.setTime(a.getTime()+e*i);s.c_w(c,v,e" + "==0?0:a);}return v==k?'':v");

  /* * s.join: 1.0 - Joins an array into a string */
  s.join = new Function("v", "p", "" + "var s = this;var f,b,d,w;if(p){f=p.front?p.front:'';b=p.back?p.back" + ":'';d=p.delim?p.delim:'';w=p.wrap?p.wrap:'';}var str='';for(var x=0" + ";x<v.length;x++){if(typeof(v[x])=='object' )str+=s.join( v[x],p);el" + "se str+=w+v[x]+w;if(x<v.length-1)str+=d;}return f+str+b;");

  /* * Utility Function: split v1.5 - split a string (JS 1.0 compatible) */
  s.split = new Function("l", "d", "" + "var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x" + "++]=l.substring(0,i);l=l.substring(i+d.length);}return a");

  /*
   *	Plug-in: crossVisitParticipation v1.7 - stacks values from
   *	specified variable in cookie and returns value
   */
  s.crossVisitParticipation = new Function("v", "cn", "ex", "ct", "dl", "ev", "dv", "" + "var s=this,ce;if(typeof(dv)==='undefined')dv=0;if(s.events&&ev){var" + " ay=s.split(ev,',');var ea=s.split(s.events,',');for(var u=0;u<ay.l" + "ength;u++){for(var x=0;x<ea.length;x++){if(ay[u]==ea[x]){ce=1;}}}}i" + "f(!v||v==''){if(ce){s.c_w(cn,'');return'';}else return'';}v=escape(" + "v);var arry=new Array(),a=new Array(),c=s.c_r(cn),g=0,h=new Array()" + ";if(c&&c!=''){arry=s.split(c,'],[');for(q=0;q<arry.length;q++){z=ar" + "ry[q];z=s.repl(z,'[','');z=s.repl(z,']','');z=s.repl(z,\"'\",'');arry" + "[q]=s.split(z,',')}}var e=new Date();e.setFullYear(e.getFullYear()+" + "5);if(dv==0&&arry.length>0&&arry[arry.length-1][0]==v)arry[arry.len" + "gth-1]=[v,new Date().getTime()];else arry[arry.length]=[v,new Date(" + ").getTime()];var start=arry.length-ct<0?0:arry.length-ct;var td=new" + " Date();for(var x=start;x<arry.length;x++){var diff=Math.round((td." + "getTime()-arry[x][1])/86400000);if(diff<ex){h[g]=unescape(arry[x][0" + "]);a[g]=[arry[x][0],arry[x][1]];g++;}}var data=s.join(a,{delim:','," + "front:'[',back:']',wrap:\"'\"});s.c_w(cn,data,e);var r=s.join(h,{deli" + "m:dl});if(ce)s.c_w(cn,'');return r;");

  /* * Plugin Utility: Replace v1.0 */
  s.repl = new Function("x", "o", "n", "" + "var i=x.indexOf(o),l=n.length;while(x&&i>=0){x=x.substring(0,i)+n+x." + "substring(i+o.length);i=x.indexOf(o,i+l)}return x");


  /************************** MODULES SECTION *************************/

  function AppMeasurement_Module_Media(q) {
    var b = this;
    b.s = q;
    q = window;
    q.s_c_in || (q.s_c_il = [], q.s_c_in = 0);
    b._il = q.s_c_il;
    b._in = q.s_c_in;
    b._il[b._in] = b;
    q.s_c_in++;
    b._c = "s_m";
    b.list = [];
    b.open = function(d, c, e, k) {
      var f = {},
        a = new Date,
        l = "",
        g;
      c || (c = -1);
      if (d && e) {
        b.list || (b.list = {});
        b.list[d] && b.close(d);
        k && k.id && (l = k.id);
        if (l)
          for (g in b.list) !Object.prototype[g] && b.list[g] && b.list[g].R == l && b.close(b.list[g].name);
        f.name = d;
        f.length = c;
        f.offset = 0;
        f.e = 0;
        f.playerName = b.playerName ? b.playerName : e;
        f.R = l;
        f.C = 0;
        f.a = 0;
        f.timestamp =
          Math.floor(a.getTime() / 1E3);
        f.k = 0;
        f.u = f.timestamp;
        f.c = -1;
        f.n = "";
        f.g = -1;
        f.D = 0;
        f.I = {};
        f.G = 0;
        f.m = 0;
        f.f = "";
        f.B = 0;
        f.L = 0;
        f.A = 0;
        f.F = 0;
        f.l = !1;
        f.v = "";
        f.J = "";
        f.K = 0;
        f.r = !1;
        f.H = "";
        f.complete = 0;
        f.Q = 0;
        f.p = 0;
        f.q = 0;
        b.list[d] = f
      }
    };
    b.openAd = function(d, c, e, k, f, a, l, g) {
      var h = {};
      b.open(d, c, e, g);
      if (h = b.list[d]) h.l = !0, h.v = k, h.J = f, h.K = a, h.H = l
    };
    b.M = function(d) {
      var c = b.list[d];
      b.list[d] = 0;
      c && c.monitor && clearTimeout(c.monitor.interval)
    };
    b.close = function(d) {
      b.i(d, 0, -1)
    };
    b.play = function(d, c, e, k) {
      var f = b.i(d, 1, c, e, k);
      f && !f.monitor &&
        (f.monitor = {}, f.monitor.update = function() {
          1 == f.k && b.i(f.name, 3, -1);
          f.monitor.interval = setTimeout(f.monitor.update, 1E3)
        }, f.monitor.update())
    };
    b.click = function(d, c) {
      b.i(d, 7, c)
    };
    b.complete = function(d, c) {
      b.i(d, 5, c)
    };
    b.stop = function(d, c) {
      b.i(d, 2, c)
    };
    b.track = function(d) {
      b.i(d, 4, -1)
    };
    b.P = function(d, c) {
      var e = "a.media.",
        k = d.linkTrackVars,
        f = d.linkTrackEvents,
        a = "m_i",
        l, g = d.contextData,
        h;
      c.l && (e += "ad.", c.v && (g["a.media.name"] = c.v, g[e + "pod"] = c.J, g[e + "podPosition"] = c.K), c.G || (g[e + "CPM"] = c.H));
      c.r && (g[e + "clicked"] = !0, c.r = !1);
      g["a.contentType"] = "video" + (c.l ? "Ad" : "");
      g["a.media.channel"] = b.channel;
      g[e + "name"] = c.name;
      g[e + "playerName"] = c.playerName;
      0 < c.length && (g[e + "length"] = c.length);
      g[e + "timePlayed"] = Math.floor(c.a);
      0 < Math.floor(c.a) && (g[e + "timePlayed"] = Math.floor(c.a));
      c.G || (g[e + "view"] = !0, a = "m_s", b.Heartbeat && b.Heartbeat.enabled && (a = c.l ? b.__primetime ? "mspa_s" : "msa_s" : b.__primetime ? "msp_s" : "ms_s"), c.G = 1);
      c.f && (g[e + "segmentNum"] = c.m, g[e + "segment"] = c.f, 0 < c.B && (g[e + "segmentLength"] = c.B), c.A && 0 < c.a && (g[e + "segmentView"] = !0));
      !c.Q && c.complete && (g[e + "complete"] = !0, c.S = 1);
      0 < c.p && (g[e + "milestone"] = c.p);
      0 < c.q && (g[e + "offsetMilestone"] = c.q);
      if (k)
        for (h in g) Object.prototype[h] || (k += ",contextData." + h);
      l = g["a.contentType"];
      d.pe = a;
      d.pev3 = l;
      var q, s;
      if (b.contextDataMapping)
        for (h in d.events2 || (d.events2 = ""), k && (k += ",events"), b.contextDataMapping)
          if (!Object.prototype[h]) {
            a = h.length > e.length && h.substring(0, e.length) == e ? h.substring(e.length) : "";
            l = b.contextDataMapping[h];
            if ("string" == typeof l)
              for (q = l.split(","), s = 0; s < q.length; s++) l =
                q[s], "a.contentType" == h ? (k && (k += "," + l), d[l] = g[h]) : "view" == a || "segmentView" == a || "clicked" == a || "complete" == a || "timePlayed" == a || "CPM" == a ? (f && (f += "," + l), "timePlayed" == a || "CPM" == a ? g[h] && (d.events2 += (d.events2 ? "," : "") + l + "=" + g[h]) : g[h] && (d.events2 += (d.events2 ? "," : "") + l)) : "segment" == a && g[h + "Num"] ? (k && (k += "," + l), d[l] = g[h + "Num"] + ":" + g[h]) : (k && (k += "," + l), d[l] = g[h]);
            else if ("milestones" == a || "offsetMilestones" == a) h = h.substring(0, h.length - 1), g[h] && b.contextDataMapping[h + "s"][g[h]] && (f && (f += "," + b.contextDataMapping[h +
              "s"][g[h]]), d.events2 += (d.events2 ? "," : "") + b.contextDataMapping[h + "s"][g[h]]);
            g[h] && (g[h] = 0);
            "segment" == a && g[h + "Num"] && (g[h + "Num"] = 0)
          }
      d.linkTrackVars = k;
      d.linkTrackEvents = f
    };
    b.i = function(d, c, e, k, f) {
      var a = {},
        l = (new Date).getTime() / 1E3,
        g, h, q = b.trackVars,
        s = b.trackEvents,
        t = b.trackSeconds,
        u = b.trackMilestones,
        v = b.trackOffsetMilestones,
        w = b.segmentByMilestones,
        x = b.segmentByOffsetMilestones,
        p, n, r = 1,
        m = {},
        y;
      b.channel || (b.channel = b.s.w.location.hostname);
      if (a = d && b.list && b.list[d] ? b.list[d] : 0)
        if (a.l && (t = b.adTrackSeconds,
            u = b.adTrackMilestones, v = b.adTrackOffsetMilestones, w = b.adSegmentByMilestones, x = b.adSegmentByOffsetMilestones), 0 > e && (e = 1 == a.k && 0 < a.u ? l - a.u + a.c : a.c), 0 < a.length && (e = e < a.length ? e : a.length), 0 > e && (e = 0), a.offset = e, 0 < a.length && (a.e = a.offset / a.length * 100, a.e = 100 < a.e ? 100 : a.e), 0 > a.c && (a.c = e), y = a.D, m.name = d, m.ad = a.l, m.length = a.length, m.openTime = new Date, m.openTime.setTime(1E3 * a.timestamp), m.offset = a.offset, m.percent = a.e, m.playerName = a.playerName, m.mediaEvent = 0 > a.g ? "OPEN" : 1 == c ? "PLAY" : 2 == c ? "STOP" : 3 == c ? "MONITOR" :
          4 == c ? "TRACK" : 5 == c ? "COMPLETE" : 7 == c ? "CLICK" : "CLOSE", 2 < c || c != a.k && (2 != c || 1 == a.k)) {
          f || (k = a.m, f = a.f);
          if (c) {
            1 == c && (a.c = e);
            if ((3 >= c || 5 <= c) && 0 <= a.g && (r = !1, q = s = "None", a.g != e)) {
              h = a.g;
              h > e && (h = a.c, h > e && (h = e));
              p = u ? u.split(",") : 0;
              if (0 < a.length && p && e >= h)
                for (n = 0; n < p.length; n++)(g = p[n] ? parseFloat("" + p[n]) : 0) && h / a.length * 100 < g && a.e >= g && (r = !0, n = p.length, m.mediaEvent = "MILESTONE", a.p = m.milestone = g);
              if ((p = v ? v.split(",") : 0) && e >= h)
                for (n = 0; n < p.length; n++)(g = p[n] ? parseFloat("" + p[n]) : 0) && h < g && e >= g && (r = !0, n = p.length, m.mediaEvent =
                  "OFFSET_MILESTONE", a.q = m.offsetMilestone = g)
            }
            if (a.L || !f) {
              if (w && u && 0 < a.length) {
                if (p = u.split(","))
                  for (p.push("100"), n = h = 0; n < p.length; n++)
                    if (g = p[n] ? parseFloat("" + p[n]) : 0) a.e < g && (k = n + 1, f = "M:" + h + "-" + g, n = p.length), h = g
              } else if (x && v && (p = v.split(",")))
                for (p.push("" + (0 < a.length ? a.length : "E")), n = h = 0; n < p.length; n++)
                  if ((g = p[n] ? parseFloat("" + p[n]) : 0) || "E" == p[n]) {
                    if (e < g || "E" == p[n]) k = n + 1, f = "O:" + h + "-" + g, n = p.length;
                    h = g
                  }
              f && (a.L = !0)
            }(f || a.f) && f != a.f && (a.F = !0, a.f || (a.m = k, a.f = f), 0 <= a.g && (r = !0));
            (2 <= c || 100 <= a.e) && a.c < e &&
              (a.C += e - a.c, a.a += e - a.c);
            if (2 >= c || 3 == c && !a.k) a.n += (1 == c || 3 == c ? "S" : "E") + Math.floor(e), a.k = 3 == c ? 1 : c;
            !r && 0 <= a.g && 3 >= c && (t = t ? t : 0) && a.a >= t && (r = !0, m.mediaEvent = "SECONDS");
            a.u = l;
            a.c = e
          }
          if (!c || 3 >= c && 100 <= a.e) 2 != a.k && (a.n += "E" + Math.floor(e)), c = 0, q = s = "None", m.mediaEvent = "CLOSE";
          7 == c && (r = m.clicked = a.r = !0);
          if (5 == c || b.completeByCloseOffset && (!c || 100 <= a.e) && 0 < a.length && e >= a.length - b.completeCloseOffsetThreshold) r = m.complete = a.complete = !0;
          l = m.mediaEvent;
          "MILESTONE" == l ? l += "_" + m.milestone : "OFFSET_MILESTONE" == l && (l +=
            "_" + m.offsetMilestone);
          a.I[l] ? m.eventFirstTime = !1 : (m.eventFirstTime = !0, a.I[l] = 1);
          m.event = m.mediaEvent;
          m.timePlayed = a.C;
          m.segmentNum = a.m;
          m.segment = a.f;
          m.segmentLength = a.B;
          b.monitor && 4 != c && b.monitor(b.s, m);
          b.Heartbeat && b.Heartbeat.enabled && 0 <= a.g && (r = !1);
          0 == c && b.M(d);
          r && a.D == y && (d = {
            contextData: {}
          }, d.linkTrackVars = q, d.linkTrackEvents = s, d.linkTrackVars || (d.linkTrackVars = ""), d.linkTrackEvents || (d.linkTrackEvents = ""), b.P(d, a), d.linkTrackVars || (d["!linkTrackVars"] = 1), d.linkTrackEvents || (d["!linkTrackEvents"] =
            1), b.s.track(d), a.F ? (a.m = k, a.f = f, a.A = !0, a.F = !1) : 0 < a.a && (a.A = !1), a.n = "", a.p = a.q = 0, a.a -= Math.floor(a.a), a.g = e, a.D++)
        }
      return a
    };
    b.O = function(d, c, e, k, f) {
      var a = 0;
      if (d && (!b.autoTrackMediaLengthRequired || c && 0 < c)) {
        if (b.list && b.list[d]) a = 1;
        else if (1 == e || 3 == e) b.open(d, c, "HTML5 Video", f), a = 1;
        a && b.i(d, e, k, -1, 0)
      }
    };
    b.attach = function(d) {
      var c, e, k;
      d && d.tagName && "VIDEO" == d.tagName.toUpperCase() && (b.o || (b.o = function(c, a, d) {
        var e, h;
        b.autoTrack && (e = c.currentSrc, (h = c.duration) || (h = -1), 0 > d && (d = c.currentTime), b.O(e, h, a,
          d, c))
      }), c = function() {
        b.o(d, 1, -1)
      }, e = function() {
        b.o(d, 1, -1)
      }, b.j(d, "play", c), b.j(d, "pause", e), b.j(d, "seeking", e), b.j(d, "seeked", c), b.j(d, "ended", function() {
        b.o(d, 0, -1)
      }), b.j(d, "timeupdate", c), k = function() {
        d.paused || d.ended || d.seeking || b.o(d, 3, -1);
        setTimeout(k, 1E3)
      }, k())
    };
    b.j = function(b, c, e) {
      b.attachEvent ? b.attachEvent("on" + c, e) : b.addEventListener && b.addEventListener(c, e, !1)
    };
    void 0 == b.completeByCloseOffset && (b.completeByCloseOffset = 1);
    void 0 == b.completeCloseOffsetThreshold && (b.completeCloseOffsetThreshold =
      1);
    b.Heartbeat = {};
    b.N = function() {
      var d, c;
      if (b.autoTrack && (d = b.s.d.getElementsByTagName("VIDEO")))
        for (c = 0; c < d.length; c++) b.attach(d[c])
    };
    b.j(q, "load", b.N)
  }

}]);
Bootstrapper.AF.push(['push', 'SiteCatalyst', 'ns', 's']);
